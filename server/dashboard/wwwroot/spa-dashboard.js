/*! For license information please see spa-dashboard.js.LICENSE.txt */
System.register(["react","react-dom"],(function(e,t){var n={},r={};return Object.defineProperty(n,"__esModule",{value:!0}),{setters:[function(e){Object.keys(e).forEach((function(t){n[t]=e[t]}))},function(e){r.default=e.default}],execute:function(){e((()=>{var e={320:e=>{"use strict";var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;function o(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,i){for(var s,a,c=o(e),u=1;u<arguments.length;u++){for(var l in s=Object(arguments[u]))n.call(s,l)&&(c[l]=s[l]);if(t){a=t(s);for(var h=0;h<a.length;h++)r.call(s,a[h])&&(c[a[h]]=s[a[h]])}}return c}},589:function(e,t,n){!function(e,t){"use strict";function n(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(n){if("default"!==n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})}})),t.default=e,Object.freeze(t)}var r=n(t);function o(e,t){return o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},o(e,t)}var i={error:null},s=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this).state=i,t.resetErrorBoundary=function(){for(var e,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];null==t.props.onReset||(e=t.props).onReset.apply(e,r),t.reset()},t}var n,s;s=e,(n=t).prototype=Object.create(s.prototype),n.prototype.constructor=n,o(n,s),t.getDerivedStateFromError=function(e){return{error:e}};var a=t.prototype;return a.reset=function(){this.setState(i)},a.componentDidCatch=function(e,t){var n,r;null==(n=(r=this.props).onError)||n.call(r,e,t)},a.componentDidUpdate=function(e,t){var n,r,o,i,s=this.state.error,a=this.props.resetKeys;null!==s&&null!==t.error&&(void 0===(o=e.resetKeys)&&(o=[]),void 0===(i=a)&&(i=[]),o.length!==i.length||o.some((function(e,t){return!Object.is(e,i[t])})))&&(null==(n=(r=this.props).onResetKeysChange)||n.call(r,e.resetKeys,a),this.reset())},a.render=function(){var e=this.state.error,t=this.props,n=t.fallbackRender,o=t.FallbackComponent,i=t.fallback;if(null!==e){var s={error:e,resetErrorBoundary:this.resetErrorBoundary};if(r.isValidElement(i))return i;if("function"==typeof n)return n(s);if(o)return r.createElement(o,s);throw new Error("react-error-boundary requires either a fallback, fallbackRender, or FallbackComponent prop")}return this.props.children},t}(r.Component);e.ErrorBoundary=s,e.useErrorHandler=function(e){var t=r.useState(null),n=t[0],o=t[1];if(null!=e)throw e;if(null!=n)throw n;return o},e.withErrorBoundary=function(e,t){var n=function(n){return r.createElement(s,t,r.createElement(e,n))},o=e.displayName||e.name||"Unknown";return n.displayName="withErrorBoundary("+o+")",n},Object.defineProperty(e,"__esModule",{value:!0})}(t,n(954))},837:(e,t,n)=>{"use strict";n(320);var r=n(954),o=60103;if("function"==typeof Symbol&&Symbol.for){var i=Symbol.for;o=i("react.element"),i("react.fragment")}var s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a=Object.prototype.hasOwnProperty,c={key:!0,ref:!0,__self:!0,__source:!0};function u(e,t,n){var r,i={},u=null,l=null;for(r in void 0!==n&&(u=""+n),void 0!==t.key&&(u=""+t.key),void 0!==t.ref&&(l=t.ref),t)a.call(t,r)&&!c.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===i[r]&&(i[r]=t[r]);return{$$typeof:o,type:e,key:u,ref:l,props:i,_owner:s.current}}t.jsx=u,t.jsxs=u},322:(e,t,n)=>{"use strict";e.exports=n(837)},907:(e,t,n)=>{const r=n(541).R;t.s=function(e){if(e||(e=1),!n.y.meta||!n.y.meta.url)throw console.error("__system_context__",n.y),Error("systemjs-webpack-interop was provided an unknown SystemJS context. Expected context.meta.url, but none was provided");n.p=r(n.y.meta.url,e)}},541:(e,t,n)=>{t.R=function(e,t){var n=document.createElement("a");n.href=e;for(var r="/"===n.pathname[0]?n.pathname:"/"+n.pathname,o=0,i=r.length;o!==t&&i>=0;)"/"===r[--i]&&o++;if(o!==t)throw Error("systemjs-webpack-interop: rootDirectoryLevel ("+t+") is greater than the number of directories ("+o+") in the URL path "+e);var s=r.slice(0,i+1);return n.protocol+"//"+n.host+s};Number.isInteger},954:e=>{"use strict";e.exports=n},493:e=>{"use strict";e.exports=r}},o={};function i(t){var n=o[t];if(void 0!==n)return n.exports;var r=o[t]={exports:{}};return e[t].call(r.exports,r,r.exports,i),r.exports}i.y=t,i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.p="";var s={};return(0,i(907).s)(1),(()=>{"use strict";i.r(s),i.d(s,{bootstrap:()=>da,mount:()=>pa,unmount:()=>ga});var e=i(954),t=i(493);function n(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function r(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){var n;if("function"!=typeof(n=t.domElement?function(){return t.domElement}:t.domElementGetter?t.domElementGetter:e.domElementGetter?e.domElementGetter:function(e){var t=e.appName||e.name;if(!t)throw Error("single-spa's dom-element-getter-helpers was not given an application name as a prop, so it can't make a unique dom element container for the react application");var n="single-spa-application:".concat(t);return function(){var e=document.getElementById(n);return e||((e=document.createElement("div")).id=n,document.body.appendChild(e)),e}}(t)))throw Error("single-spa's dom-element-getter-helpers was given an invalid domElementGetter for application or parcel '".concat(t.name,"'. Expected a function, received ").concat(c(n)));return function(){var e=n(t);if(!(e instanceof HTMLElement))throw Error("single-spa's dom-element-getter-helpers: domElementGetter returned an invalid dom element for application or parcel '".concat(t.name,"'. Expected HTMLElement, received ").concat(c(e)));return e}}var l=null;try{l=require("react").createContext()}catch(n){}var h={React:null,ReactDOM:null,rootComponent:null,loadRootComponent:null,renderType:null,errorBoundary:null,errorBoundaryClass:null,domElementGetter:null,parcelCanUpdate:!0,suppressComponentDidCatchWarning:!1,domElements:{},renderResults:{},updateResolves:{}};function f(e,t){return e.rootComponent?Promise.resolve():e.loadRootComponent(t).then((function(t){e.rootComponent=t}))}function d(e,t){return new Promise((function(n,r){e.suppressComponentDidCatchWarning||!function(e){if(!(e&&"string"==typeof e.version&&e.version.indexOf(".")>=0))return!1;var t=e.version.slice(0,e.version.indexOf("."));try{return Number(t)>=16}catch(e){return!1}}(e.React)||e.errorBoundary||(e.rootComponent.prototype?e.rootComponent.prototype.componentDidCatch||console.warn("single-spa-react: ".concat(t.name||t.appName||t.childAppName,"'s rootComponent should implement componentDidCatch to avoid accidentally unmounting the entire single-spa application.")):console.warn("single-spa-react: ".concat(t.name||t.appName||t.childAppName,"'s rootComponent does not implement an error boundary.  If using a functional component, consider providing an opts.errorBoundary to singleSpaReact(opts).")));var o=y(e,t,(function(){n(this)})),i=u(e,t)(),s=function(e){var t=e.opts,n=e.elementToRender,r=e.domElement,o="function"==typeof t.renderType?t.renderType():t.renderType;if(["createRoot","unstable_createRoot","createBlockingRoot","unstable_createBlockingRoot"].indexOf(o)>=0){var i=t.ReactDOM[o](r);return i.render(n),i}return"hydrate"===o?t.ReactDOM.hydrate(n,r):t.ReactDOM.render(n,r),null}({elementToRender:o,domElement:i,opts:e});e.domElements[t.name]=i,e.renderResults[t.name]=s}))}function p(e,t){return new Promise((function(n){e.unmountFinished=n;var r=e.renderResults[t.name];r&&r.unmount?r.unmount():e.ReactDOM.unmountComponentAtNode(e.domElements[t.name]),delete e.domElements[t.name],delete e.renderResults[t.name]}))}function g(e,t){return new Promise((function(n){e.updateResolves[t.name]||(e.updateResolves[t.name]=[]),e.updateResolves[t.name].push(n);var r=y(e,t,null),o=e.renderResults[t.name];if(o&&o.render)o.render(r);else{var i=u(e,t)();e.ReactDOM.render(r,i)}}))}function y(e,t,n){var o=e.React.createElement(e.rootComponent,t),i=l?e.React.createElement(l.Provider,{value:t},o):o;function s(e){s.displayName="SingleSpaRoot(".concat(e.name,")")}return(e.errorBoundary||t.errorBoundary||e.errorBoundaryClass||t.errorBoundaryClass)&&(e.errorBoundaryClass=e.errorBoundaryClass||t.errorBoundaryClass||function(e,t){function n(t){e.React.Component.apply(this,arguments),this.state={caughtError:null,caughtErrorInfo:null},n.displayName="SingleSpaReactErrorBoundary(".concat(t.name,")")}return n.prototype=Object.create(e.React.Component.prototype),n.prototype.render=function(){return this.state.caughtError?(e.errorBoundary||t.errorBoundary)(this.state.caughtError,this.state.caughtErrorInfo,this.props):this.props.children},n.prototype.componentDidCatch=function(e,t){this.setState({caughtError:e,caughtErrorInfo:t})},n}(e,t),i=e.React.createElement(e.errorBoundaryClass,t,i)),i=e.React.createElement(s,r(r({},t),{},{mountFinished:n,updateFinished:function(){e.updateResolves[t.name]&&(e.updateResolves[t.name].forEach((function(e){return e()})),delete e.updateResolves[t.name])},unmountFinished:function(){setTimeout(e.unmountFinished)}}),i),s.prototype=Object.create(e.React.Component.prototype),s.prototype.componentDidMount=function(){setTimeout(this.props.mountFinished)},s.prototype.componentWillUnmount=function(){setTimeout(this.props.unmountFinished)},s.prototype.render=function(){return setTimeout(this.props.updateFinished),this.props.children},i}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var m=i(589),b=function(e){return!!e&&"function"==typeof e.then},w=function(e,t){if(null!=e)return e;throw new Error(null!=t?t:"Got unexpected null or undefined")};class S{}const _=new S,E={valueMaybe(){},valueOrThrow(){throw new Error(`Loadable expected value, but in "${this.state}" state`)},errorMaybe(){},errorOrThrow(){throw new Error(`Loadable expected error, but in "${this.state}" state`)},promiseMaybe(){},promiseOrThrow(){throw new Error(`Loadable expected promise, but in "${this.state}" state`)},is(e){return e.state===this.state&&e.contents===this.contents},map(e){if("hasError"===this.state)return this;if("hasValue"===this.state)try{const t=e(this.contents);return b(t)?C(t.then((e=>({__value:e})))):T(t)}catch(t){return b(t)?C(t.next((()=>e(this.contents)))):k(t)}if("loading"===this.state)return C(this.contents.then((t=>({__value:e(t.__value)}))).catch((t=>{if(b(t))return t.then((()=>e(this.contents)));throw t})));throw new Error("Invalid Loadable state")}};function T(e){return Object.freeze({state:"hasValue",contents:e,...E,getValue(){return this.contents},toPromise(){return Promise.resolve(this.contents)},valueMaybe(){return this.contents},valueOrThrow(){return this.contents}})}function k(e){return Object.freeze({state:"hasError",contents:e,...E,getValue(){throw this.contents},toPromise(){return Promise.reject(this.contents)},errorMaybe(){return this.contents},errorOrThrow(){return this.contents}})}function C(e){return Object.freeze({state:"loading",contents:e,...E,getValue(){throw this.contents.then((({__value:e})=>e))},toPromise(){return this.contents.then((({__value:e})=>e))},promiseMaybe(){return this.contents.then((({__value:e})=>e))},promiseOrThrow(){return this.contents.then((({__value:e})=>e))}})}var R,A={loadableWithValue:T,loadableWithError:k,loadableWithPromise:C,loadableLoading:function(){return C(new Promise((()=>{})))},loadableAll:function(e){return e.every((e=>"hasValue"===e.state))?T(e.map((e=>e.contents))):e.some((e=>"hasError"===e.state))?k(w(e.find((e=>"hasError"===e.state)),"Invalid loadable passed to loadableAll").contents):C(Promise.all(e.map((e=>e.contents))).then((e=>({__value:e}))))},Canceled:S,CANCELED:_};const N=null!==(R=e.default.useMutableSource)&&void 0!==R?R:e.default.unstable_useMutableSource;var P={mutableSourceExists:function(){return N&&!("undefined"!=typeof window&&window.$disableRecoilValueMutableSource_TEMP_HACK_DO_NOT_USE)},useMutableSource:N};const{mutableSourceExists:O}=P,I=(new Map).set("recoil_hamt_2020",!0).set("recoil_memory_managament_2020",!0).set("recoil_suppress_rerender_in_callback",!0);function D(e){var t;return!("recoil_early_rendering_2021"===e&&!O())&&null!==(t=I.get(e))&&void 0!==t&&t}D.setPass=e=>{I.set(e,!0)},D.setFail=e=>{I.set(e,!1)};var x=D,j={setByAddingToSet:function(e,t){const n=new Set(e);return n.add(t),n},setByDeletingFromSet:function(e,t){const n=new Set(e);return n.delete(t),n},mapBySettingInMap:function(e,t,n){const r=new Map(e);return r.set(t,n),r},mapByUpdatingInMap:function(e,t,n){const r=new Map(e);return r.set(t,n(r.get(t))),r},mapByDeletingFromMap:function(e,t){const n=new Map(e);return n.delete(t),n},mapByDeletingMultipleFromMap:function(e,t){const n=new Map(e);return t.forEach((e=>n.delete(e))),n}},M=function*(e,t){let n=0;for(const r of e)t(r,n++)&&(yield r)},L=function(e,t){return function*(){let n=0;for(const r of e)yield t(r,n++)}()};function V(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class B{constructor(e){V(this,"key",void 0),this.key=e}}class U extends B{}class F extends B{}var H={AbstractRecoilValue:B,RecoilState:U,RecoilValueReadOnly:F,isRecoilValue:function(e){return e instanceof U||e instanceof F}},W=H.AbstractRecoilValue,z=H.RecoilState,q=H.RecoilValueReadOnly,G=H.isRecoilValue,K=Object.freeze({__proto__:null,AbstractRecoilValue:W,RecoilState:z,RecoilValueReadOnly:q,isRecoilValue:G});class ${}const Z=new $;class J extends Error{constructor(e){super(`Tried to set the value of Recoil selector ${e} using an updater function, but it is an async selector in a pending or error state; this is not supported.`)}}const X=new Map,Q=new Map;class Y extends Error{}const ee=new Map;function te(e){return ee.get(e)}var ne={nodes:X,recoilValues:Q,registerNode:function(e){if(X.has(e.key)){const t=`Duplicate atom key "${e.key}". This is a FATAL ERROR in\n      production. But it is safe to ignore this warning if it occurred because of\n      hot module replacement.`;console.warn(t)}X.set(e.key,e);const t=null==e.set?new K.RecoilValueReadOnly(e.key):new K.RecoilState(e.key);return Q.set(e.key,t),t},getNode:function(e){const t=X.get(e);if(null==t)throw new Y(`Missing definition for RecoilValue: "${e}""`);return t},getNodeMaybe:function(e){return X.get(e)},deleteNodeConfigIfPossible:function(e){var t;if(!x("recoil_memory_managament_2020"))return;const n=X.get(e);var r;(null==n||null===(t=n.shouldDeleteConfigOnRelease)||void 0===t?void 0:t.call(n))&&(X.delete(e),null===(r=te(e))||void 0===r||r(),ee.delete(e))},setConfigDeletionHandler:function(e,t){x("recoil_memory_managament_2020")&&(void 0===t?ee.delete(e):ee.set(e,t))},getConfigDeletionHandler:te,recoilValuesForKeys:function(e){return L(e,(e=>w(Q.get(e))))},NodeMissingError:Y,DefaultValue:$,DEFAULT_VALUE:Z,RecoilValueNotReady:J};class re{}var oe={RetentionZone:re,retentionZone:function(){return new re}};const{setByAddingToSet:ie}=j,{getNode:se,getNodeMaybe:ae,recoilValuesForKeys:ce}=ne,{RetentionZone:ue}=oe,le=Object.freeze(new Set);class he extends Error{}function fe(e,t,n,r){const o=e.getState();if(o.nodeCleanupFunctions.has(n))return;const i=se(n),s=function(e,t,n){if(!x("recoil_memory_managament_2020"))return()=>{};const{nodesRetainedByZone:r}=e.getState().retention;function o(e){let n=r.get(e);n||r.set(e,n=new Set),n.add(t)}if(n instanceof ue)o(n);else if(Array.isArray(n))for(const e of n)o(e);return()=>{if(!x("recoil_memory_managament_2020"))return;const r=e.getState().retention.nodesRetainedByZone;function o(e){const n=r.get(e);n&&n.delete(t),n&&0===n.size&&r.delete(e)}if(n instanceof ue)o(n);else if(Array.isArray(n))for(const e of n)o(e)}}(e,n,i.retainedBy),a=i.init(e,t,r);o.nodeCleanupFunctions.set(n,(()=>{a(),s()}))}function de(e,t,n){return se(n).peek(e,t)}function pe(e,t,n){const r=new Set,o=Array.from(n),i=e.getGraph(t.version);for(let e=o.pop();e;e=o.pop()){var s;r.add(e);const t=null!==(s=i.nodeToNodeSubscriptions.get(e))&&void 0!==s?s:le;for(const e of t)r.has(e)||o.push(e)}return r}var ge={getNodeLoadable:function(e,t,n){return fe(e,t,n,"get"),se(n).get(e,t)},peekNodeLoadable:de,setNodeValue:function(e,t,n,r){const o=se(n);if(null==o.set)throw new he(`Attempt to set read-only RecoilValue: ${n}`);const i=o.set;return fe(e,t,n,"set"),i(e,t,r)},cleanUpNode:function(e,t){var n;const r=e.getState();null===(n=r.nodeCleanupFunctions.get(t))||void 0===n||n(),r.nodeCleanupFunctions.delete(t)},setUnvalidatedAtomValue_DEPRECATED:function(e,t,n){var r;const o=ae(t);return null==o||null===(r=o.invalidate)||void 0===r||r.call(o,e),{...e,atomValues:e.atomValues.clone().delete(t),nonvalidatedAtoms:e.nonvalidatedAtoms.clone().set(t,n),dirtyAtoms:ie(e.dirtyAtoms,t)}},peekNodeInfo:function(e,t,n){var r,o,i;const s=e.getState(),a=e.getGraph(t.version),c=s.knownAtoms.has(n)?"atom":s.knownSelectors.has(n)?"selector":void 0,u=M(pe(e,t,new Set([n])),(e=>e!==n));return{loadable:de(e,t,n),isActive:s.knownAtoms.has(n)||s.knownSelectors.has(n),isSet:"selector"!==c&&t.atomValues.has(n),isModified:t.dirtyAtoms.has(n),type:c,deps:ce(null!==(r=a.nodeDeps.get(n))&&void 0!==r?r:[]),subscribers:{nodes:ce(u),components:L(null!==(o=null===(i=s.nodeToComponentSubscriptions.get(n))||void 0===i?void 0:i.values())&&void 0!==o?o:[],(([e])=>({name:e})))}}},getDownstreamNodes:pe,initializeNodeIfNewToStore:fe};const{CANCELED:ye}=A,{getDownstreamNodes:ve,getNodeLoadable:me,setNodeValue:be}=ge,{getNodeMaybe:we}=ne,{DefaultValue:Se,RecoilValueNotReady:_e}=ne,{AbstractRecoilValue:Ee,RecoilState:Te,RecoilValueReadOnly:ke,isRecoilValue:Ce}=K;function Re(e,t,n){if("set"===n.type){const{recoilValue:r,valueOrUpdater:o}=n,i=function(e,t,{key:n},r){if("function"==typeof r){const o=me(e,t,n);if("loading"===o.state)throw new _e(n);if("hasError"===o.state)throw o.contents;return r(o.contents)}return r}(e,t,r,o),s=be(e,t,r.key,i);for(const[e,n]of s.entries())Ae(t,e,n)}else if("setLoadable"===n.type){const{recoilValue:{key:e},loadable:r}=n;Ae(t,e,r)}else if("markModified"===n.type){const{recoilValue:{key:e}}=n;t.dirtyAtoms.add(e)}else if("setUnvalidated"===n.type){var r;const{recoilValue:{key:e},unvalidatedValue:o}=n,i=we(e);null==i||null===(r=i.invalidate)||void 0===r||r.call(i,t),t.atomValues.delete(e),t.nonvalidatedAtoms.set(e,o),t.dirtyAtoms.add(e)}else n.type}function Ae(e,t,n){"hasValue"===n.state&&n.contents instanceof Se?e.atomValues.delete(t):e.atomValues.set(t,n),e.dirtyAtoms.add(t),e.nonvalidatedAtoms.delete(t)}function Ne(e,t){e.replaceState((n=>{const r=Ie(n);for(const n of t)Re(e,r,n);return De(e,r),r}))}function Pe(e,t){if(Oe.length){const n=Oe[Oe.length-1];let r=n.get(e);r||n.set(e,r=[]),r.push(t)}else Ne(e,[t])}const Oe=[];function Ie(e){return{...e,atomValues:e.atomValues.clone(),nonvalidatedAtoms:e.nonvalidatedAtoms.clone(),dirtyAtoms:new Set(e.dirtyAtoms)}}function De(e,t){const n=ve(e,t,t.dirtyAtoms);for(const e of n){var r,o;null===(r=we(e))||void 0===r||null===(o=r.invalidate)||void 0===o||o.call(r,t)}}function xe(e,t,n){Pe(e,{type:"set",recoilValue:t,valueOrUpdater:n})}let je=0;var Me={RecoilValueReadOnly:ke,AbstractRecoilValue:Ee,RecoilState:Te,getRecoilValueAsLoadable:function(e,{key:t},n=e.getState().currentTree){var r,o;const i=e.getState();n.version!==i.currentTree.version&&n.version!==(null===(r=i.nextTree)||void 0===r?void 0:r.version)&&(n.version,null===(o=i.previousTree)||void 0===o||o.version);const s=me(e,n,t);return"loading"===s.state&&s.contents.catch((()=>ye)),s},setRecoilValue:xe,setRecoilValueLoadable:function(e,t,n){if(n instanceof Se)return xe(e,t,n);Pe(e,{type:"setLoadable",recoilValue:t,loadable:n})},markRecoilValueModified:function(e,t){Pe(e,{type:"markModified",recoilValue:t})},setUnvalidatedRecoilValue:function(e,t,n){Pe(e,{type:"setUnvalidated",recoilValue:t,unvalidatedValue:n})},subscribeToRecoilValue:function(e,{key:t},n,r=null){const o=je++,i=e.getState();if(i.nodeToComponentSubscriptions.has(t)||i.nodeToComponentSubscriptions.set(t,new Map),w(i.nodeToComponentSubscriptions.get(t)).set(o,[null!=r?r:"<not captured>",n]),x("recoil_early_rendering_2021")){const r=e.getState().nextTree;r&&r.dirtyAtoms.has(t)&&n(r)}return{release:()=>{const n=e.getState(),r=n.nodeToComponentSubscriptions.get(t);void 0!==r&&r.has(o)&&(r.delete(o),0===r.size&&n.nodeToComponentSubscriptions.delete(t))}}},isRecoilValue:Ce,applyAtomValueWrites:function(e,t){const n=e.clone();return t.forEach(((e,t)=>{"hasValue"===e.state&&e.contents instanceof Se?n.delete(t):n.set(t,e)})),n},batchStart:function(){const e=new Map;return Oe.push(e),()=>{for(const[t,n]of e)Ne(t,n);Oe.pop()}},writeLoadableToTreeState:Ae,invalidateDownstreams:De,copyTreeState:Ie,invalidateDownstreams_FOR_TESTING:De};const{unstable_batchedUpdates:Le}=t.default;var Ve={unstable_batchedUpdates:Le};const{unstable_batchedUpdates:Be}=Ve;var Ue={unstable_batchedUpdates:Be};const{batchStart:Fe}=Me,{unstable_batchedUpdates:He}=Ue;let We=He;var ze={getBatcher:()=>We,setBatcher:e=>{We=e},batchUpdates:e=>{We((()=>{let t=()=>{};try{t=Fe(),e()}finally{t()}}))}},qe=function(e,t){t()},Ge=function(e,...t){const n=new Set;e:for(const r of e){for(const e of t)if(e.has(r))continue e;n.add(r)}return n},Ke=function(e,t){const n=new Map;return e.forEach(((e,r)=>{n.set(r,t(e,r))})),n};function $e(e,t,n){const{nodeDeps:r,nodeToNodeSubscriptions:o}=t;e.forEach(((e,t)=>{const i=r.get(t);i&&n&&i!==n.nodeDeps.get(t)||(r.set(t,new Set(e)),(null==i?e:Ge(e,i)).forEach((e=>{o.has(e)||o.set(e,new Set),w(o.get(e)).add(t)})),i&&Ge(i,e).forEach((e=>{if(!o.has(e))return;const n=w(o.get(e));n.delete(t),0===n.size&&o.delete(e)})))}))}var Ze,Je,Xe={addToDependencyMap:function(e,t,n){n.has(e)||n.set(e,new Set),w(n.get(e)).add(t)},cloneGraph:function(e){return{nodeDeps:Ke(e.nodeDeps,(e=>new Set(e))),nodeToNodeSubscriptions:Ke(e.nodeToNodeSubscriptions,(e=>new Set(e)))}},graph:function(){return{nodeDeps:new Map,nodeToNodeSubscriptions:new Map}},mergeDepsIntoDependencyMap:function(e,t){e.forEach(((e,n)=>{t.has(n)||t.set(n,new Set);const r=w(t.get(n));e.forEach((e=>r.add(e)))}))},saveDependencyMapToStore:function(e,t,n){var r,o,i,s;const a=t.getState();n!==a.currentTree.version&&n!==(null===(r=a.nextTree)||void 0===r?void 0:r.version)&&(null===(o=a.previousTree)||void 0===o||o.version);const c=t.getGraph(n);if($e(e,c),n===(null===(i=a.previousTree)||void 0===i?void 0:i.version)&&$e(e,t.getGraph(a.currentTree.version),c),n===(null===(s=a.previousTree)||void 0===s?void 0:s.version)||n===a.currentTree.version){var u;const n=null===(u=a.nextTree)||void 0===u?void 0:u.version;void 0!==n&&$e(e,t.getGraph(n),c)}}},Qe=(Ze=function(e){var t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n={},r=Math.pow(2,5),o=r-1,i=r/2,s=r/4,a={},c=function(e){return function(){return e}},u=n.hash=function(e){var n=void 0===e?"undefined":t(e);if("number"===n)return e;"string"!==n&&(e+="");for(var r=0,o=0,i=e.length;o<i;++o)r=(r<<5)-r+e.charCodeAt(o)|0;return r},l=function(e,t){return t>>>e&o},h=function(e){return 1<<e},f=function(e,t){return n=e&t-1,n=(n=(858993459&(n-=n>>1&1431655765))+(n>>2&858993459))+(n>>4)&252645135,127&(n+=n>>8)+(n>>16);var n},d=function(e,t,n,r){var o=r;if(!e){var i=r.length;o=new Array(i);for(var s=0;s<i;++s)o[s]=r[s]}return o[t]=n,o},p=function(e,t,n){var r=n.length-1,o=0,i=0,s=n;if(e)o=i=t;else for(s=new Array(r);o<t;)s[i++]=n[o++];for(++o;o<=r;)s[i++]=n[o++];return e&&(s.length=r),s},g={__hamt_isEmpty:!0},y=function(e){return e===g||e&&e.__hamt_isEmpty},v=function(e,t,n,r){return{type:1,edit:e,hash:t,key:n,value:r,_modify:E}},m=function(e,t,n){return{type:2,edit:e,hash:t,children:n,_modify:T}},b=function(e,t,n){return{type:3,edit:e,mask:t,children:n,_modify:k}},w=function(e,t,n){return{type:4,edit:e,size:t,children:n,_modify:C}},S=function e(t,n,r,o,i,s){if(r===i)return m(t,r,[s,o]);var a=l(n,r),c=l(n,i);return b(t,h(a)|h(c),a===c?[e(t,n+5,r,o,i,s)]:a<c?[o,s]:[s,o])},_=function(e,t){return e===t.edit},E=function(e,t,n,r,o,i,s){if(t(i,this.key)){var c=r(this.value);return c===this.value?this:c===a?(--s.value,g):_(e,this)?(this.value=c,this):v(e,o,i,c)}var u=r();return u===a?this:(++s.value,S(e,n,this.hash,this,o,v(e,o,i,u)))},T=function(e,t,n,r,o,i,s){if(o===this.hash){var c=function(e,t,n,r,o,i,s,c){for(var u=o.length,l=0;l<u;++l){var h=o[l];if(n(s,h.key)){var f=h.value,g=i(f);return g===f?o:g===a?(--c.value,p(e,l,o)):d(e,l,v(t,r,s,g),o)}}var y=i();return y===a?o:(++c.value,d(e,u,v(t,r,s,y),o))}(_(e,this),e,t,this.hash,this.children,r,i,s);return c===this.children?this:c.length>1?m(e,this.hash,c):c[0]}var u=r();return u===a?this:(++s.value,S(e,n,this.hash,this,o,v(e,o,i,u)))},k=function(e,t,n,r,o,s,a){var c=this.mask,u=this.children,v=l(n,o),m=h(v),S=f(c,m),E=c&m,T=E?u[S]:g,k=T._modify(e,t,n+5,r,o,s,a);if(T===k)return this;var C,R=_(e,this),A=c,N=void 0;if(E&&y(k)){if(!(A&=~m))return g;if(u.length<=2&&((C=u[1^S])===g||1===C.type||2===C.type))return u[1^S];N=p(R,S,u)}else if(E||y(k))N=d(R,S,k,u);else{if(u.length>=i)return function(e,t,n,r,o){for(var i=[],s=r,a=0,c=0;s;++c)1&s&&(i[c]=o[a++]),s>>>=1;return i[t]=n,w(e,a+1,i)}(e,v,k,c,u);A|=m,N=function(e,t,n,r){var o=r.length;if(e){for(var i=o;i>=t;)r[i--]=r[i];return r[t]=n,r}for(var s=0,a=0,c=new Array(o+1);s<t;)c[a++]=r[s++];for(c[t]=n;s<o;)c[++a]=r[s++];return c}(R,S,k,u)}return R?(this.mask=A,this.children=N,this):b(e,A,N)},C=function(e,t,n,r,o,i,a){var c=this.size,u=this.children,h=l(n,o),f=u[h],p=(f||g)._modify(e,t,n+5,r,o,i,a);if(f===p)return this;var v=_(e,this),m=void 0;if(y(f)&&!y(p))++c,m=d(v,h,p,u);else if(!y(f)&&y(p)){if(--c<=s)return function(e,t,n,r){for(var o=new Array(t-1),i=0,s=0,a=0,c=r.length;a<c;++a)if(a!==n){var u=r[a];u&&!y(u)&&(o[i++]=u,s|=1<<a)}return b(e,s,o)}(e,c,h,u);m=d(v,h,g,u)}else m=d(v,h,p,u);return v?(this.size=c,this.children=m,this):w(e,c,m)};function R(e,t,n,r,o){this._editable=e,this._edit=t,this._config=n,this._root=r,this._size=o}g._modify=function(e,t,n,r,o,i,s){var c=r();return c===a?g:(++s.value,v(e,o,i,c))},R.prototype.setTree=function(e,t){return this._editable?(this._root=e,this._size=t,this):e===this._root?this:new R(this._editable,this._edit,this._config,e,t)};var A=n.tryGetHash=function(e,t,n,r){for(var o=r._root,i=0,s=r._config.keyEq;;)switch(o.type){case 1:return s(n,o.key)?o.value:e;case 2:if(t===o.hash)for(var a=o.children,c=0,u=a.length;c<u;++c){var d=a[c];if(s(n,d.key))return d.value}return e;case 3:var p=l(i,t),g=h(p);if(o.mask&g){o=o.children[f(o.mask,g)],i+=5;break}return e;case 4:if(o=o.children[l(i,t)]){i+=5;break}return e;default:return e}};R.prototype.tryGetHash=function(e,t,n){return A(e,t,n,this)};var N=n.tryGet=function(e,t,n){return A(e,n._config.hash(t),t,n)};R.prototype.tryGet=function(e,t){return N(e,t,this)};var P=n.getHash=function(e,t,n){return A(void 0,e,t,n)};R.prototype.getHash=function(e,t){return P(e,t,this)},n.get=function(e,t){return A(void 0,t._config.hash(e),e,t)},R.prototype.get=function(e,t){return N(t,e,this)};var O=n.has=function(e,t,n){return A(a,e,t,n)!==a};R.prototype.hasHash=function(e,t){return O(e,t,this)};var I=n.has=function(e,t){return O(t._config.hash(e),e,t)};R.prototype.has=function(e){return I(e,this)};var D=function(e,t){return e===t};n.make=function(e){return new R(0,0,{keyEq:e&&e.keyEq||D,hash:e&&e.hash||u},g,0)},n.empty=n.make();var x=n.isEmpty=function(e){return e&&!!y(e._root)};R.prototype.isEmpty=function(){return x(this)};var j=n.modifyHash=function(e,t,n,r){var o={value:r._size},i=r._root._modify(r._editable?r._edit:NaN,r._config.keyEq,0,e,t,n,o);return r.setTree(i,o.value)};R.prototype.modifyHash=function(e,t,n){return j(n,e,t,this)};var M=n.modify=function(e,t,n){return j(e,n._config.hash(t),t,n)};R.prototype.modify=function(e,t){return M(t,e,this)};var L=n.setHash=function(e,t,n,r){return j(c(n),e,t,r)};R.prototype.setHash=function(e,t,n){return L(e,t,n,this)};var V=n.set=function(e,t,n){return L(n._config.hash(e),e,t,n)};R.prototype.set=function(e,t){return V(e,t,this)};var B=c(a),U=n.removeHash=function(e,t,n){return j(B,e,t,n)};R.prototype.removeHash=R.prototype.deleteHash=function(e,t){return U(e,t,this)};var F=n.remove=function(e,t){return U(t._config.hash(e),e,t)};R.prototype.remove=R.prototype.delete=function(e){return F(e,this)};var H=n.beginMutation=function(e){return new R(e._editable+1,e._edit+1,e._config,e._root,e._size)};R.prototype.beginMutation=function(){return H(this)};var W=n.endMutation=function(e){return e._editable=e._editable&&e._editable-1,e};R.prototype.endMutation=function(){return W(this)};var z=n.mutate=function(e,t){var n=H(t);return e(n),W(n)};R.prototype.mutate=function(e){return z(e,this)};var q=function(e){return e&&G(e[0],e[1],e[2],e[3],e[4])},G=function(e,t,n,r,o){for(;n<e;){var i=t[n++];if(i&&!y(i))return K(i,r,[e,t,n,r,o])}return q(o)},K=function(e,t,n){switch(e.type){case 1:return{value:t(e),rest:n};case 2:case 4:case 3:var r=e.children;return G(r.length,r,0,t,n);default:return q(n)}},$={done:!0};function Z(e){this.v=e}Z.prototype.next=function(){if(!this.v)return $;var e=this.v;return this.v=q(e.rest),e},Z.prototype[Symbol.iterator]=function(){return this};var J=function(e,t){return new Z(K(e._root,t))},X=function(e){return[e.key,e.value]},Q=n.entries=function(e){return J(e,X)};R.prototype.entries=R.prototype[Symbol.iterator]=function(){return Q(this)};var Y=function(e){return e.key},ee=n.keys=function(e){return J(e,Y)};R.prototype.keys=function(){return ee(this)};var te=function(e){return e.value},ne=n.values=R.prototype.values=function(e){return J(e,te)};R.prototype.values=function(){return ne(this)};var re=n.fold=function(e,t,n){var r=n._root;if(1===r.type)return e(t,r.value,r.key);for(var o=[r.children],i=void 0;i=o.pop();)for(var s=0,a=i.length;s<a;){var c=i[s++];c&&c.type&&(1===c.type?t=e(t,c.value,c.key):o.push(c.children))}return t};R.prototype.fold=function(e,t){return re(e,t,this)};var oe=n.forEach=function(e,t){return re((function(n,r,o){return e(r,o,t)}),null,t)};R.prototype.forEach=function(e){return oe(e,this)};var ie=n.count=function(e){return e._size};R.prototype.count=function(){return ie(this)},Object.defineProperty(R.prototype,"size",{get:R.prototype.count}),e.exports?e.exports=n:(void 0).hamt=n},Ze(Je={exports:{}}),Je.exports);class Ye{constructor(e){V(this,"_map",void 0),this._map=new Map(null==e?void 0:e.entries())}keys(){return this._map.keys()}entries(){return this._map.entries()}get(e){return this._map.get(e)}has(e){return this._map.has(e)}set(e,t){return this._map.set(e,t),this}delete(e){return this._map.delete(e),this}clone(){return tt(this)}toMap(){return new Map(this._map)}}class et{constructor(e){if(V(this,"_hamt",Qe.empty.beginMutation()),e instanceof et){const t=e._hamt.endMutation();e._hamt=t.beginMutation(),this._hamt=t.beginMutation()}else if(e)for(const[t,n]of e.entries())this._hamt.set(t,n)}keys(){return this._hamt.keys()}entries(){return this._hamt.entries()}get(e){return this._hamt.get(e)}has(e){return this._hamt.has(e)}set(e,t){return this._hamt.set(e,t),this}delete(e){return this._hamt.delete(e),this}clone(){return tt(this)}toMap(){return new Map(this._hamt)}}function tt(e){return x("recoil_hamt_2020")?new et(e):new Ye(e)}var nt=tt,rt=Object.freeze({__proto__:null,persistentMap:nt});const{graph:ot}=Xe,{persistentMap:it}=rt;let st=0;const at=()=>st++;function ct(){const e=at();return{version:e,stateID:e,transactionMetadata:{},dirtyAtoms:new Set,atomValues:it(),nonvalidatedAtoms:it()}}var ut={makeEmptyTreeState:ct,makeEmptyStoreState:function(){const e=ct();return{currentTree:e,nextTree:null,previousTree:null,commitDepth:0,knownAtoms:new Set,knownSelectors:new Set,transactionSubscriptions:new Map,nodeTransactionSubscriptions:new Map,nodeToComponentSubscriptions:new Map,queuedComponentCallbacks_DEPRECATED:[],suspendedComponentResolvers:new Set,graphsByVersion:(new Map).set(e.version,ot()),versionsUsedByComponent:new Map,retention:{referenceCounts:new Map,nodesRetainedByZone:new Map,retainablesToCheckForRelease:new Set},nodeCleanupFunctions:new Map}},getNextTreeStateVersion:at},lt=function(...e){const t=new Set;for(const n of e)for(const e of n)t.add(e);return t},ht=function(e,t,n){const r=e.entries();let o=r.next();for(;!o.done;){const i=o.value;if(t.call(n,i[1],i[0],e))return!0;o=r.next()}return!1};const{cleanUpNode:ft}=ge,{deleteNodeConfigIfPossible:dt,getNode:pt}=ne,{RetentionZone:gt}=oe,yt=new Set;function vt(e,t){const n=e.getState(),r=n.currentTree;if(n.nextTree)return;const o=new Set;for(const e of t)if(e instanceof gt)for(const t of bt(n,e))o.add(t);else o.add(e);const i=function(e,t){const n=e.getState(),r=n.currentTree,o=e.getGraph(r.version),i=new Set,s=new Set;return function t(a){const c=new Set,u=function(e,t,n,r,o){const i=e.getGraph(t.version),s=[],a=new Set;for(;n.size>0;)c(w(n.values().next().value));return s;function c(e){if(r.has(e)||o.has(e))return void n.delete(e);if(a.has(e))return;const t=i.nodeToNodeSubscriptions.get(e);if(t)for(const e of t)c(e);a.add(e),n.delete(e),s.push(e)}}(e,r,a,i,s);for(const e of u){var l;if("recoilRoot"===pt(e).retainedBy){s.add(e);continue}if((null!==(l=n.retention.referenceCounts.get(e))&&void 0!==l?l:0)>0){s.add(e);continue}if(wt(e).some((e=>n.retention.referenceCounts.get(e)))){s.add(e);continue}const t=o.nodeToNodeSubscriptions.get(e);t&&ht(t,(e=>s.has(e)))?s.add(e):(i.add(e),c.add(e))}const h=new Set;for(const e of c)for(const t of null!==(f=o.nodeDeps.get(e))&&void 0!==f?f:yt){var f;i.has(t)||h.add(t)}h.size&&t(h)}(t),i}(e,o);for(const t of i)mt(e,r,t)}function mt(e,t,n){if(!x("recoil_memory_managament_2020"))return;ft(e,n);const r=e.getState();r.knownAtoms.delete(n),r.knownSelectors.delete(n),r.nodeTransactionSubscriptions.delete(n),r.retention.referenceCounts.delete(n);const o=wt(n);for(const e of o){var i;null===(i=r.retention.nodesRetainedByZone.get(e))||void 0===i||i.delete(n)}t.atomValues.delete(n),t.dirtyAtoms.delete(n),t.nonvalidatedAtoms.delete(n);const s=r.graphsByVersion.get(t.version);if(s){const e=s.nodeDeps.get(n);if(void 0!==e){s.nodeDeps.delete(n);for(const t of e){var a;null===(a=s.nodeToNodeSubscriptions.get(t))||void 0===a||a.delete(n)}}s.nodeToNodeSubscriptions.delete(n)}dt(n)}function bt(e,t){var n;return null!==(n=e.retention.nodesRetainedByZone.get(t))&&void 0!==n?n:yt}function wt(e){const t=pt(e).retainedBy;return void 0===t||"components"===t||"recoilRoot"===t?[]:t instanceof gt?[t]:t}function St(e,t){x("recoil_memory_managament_2020")&&(e.getState().retention.referenceCounts.delete(t),function(e,t){const n=e.getState();n.nextTree?n.retention.retainablesToCheckForRelease.add(t):vt(e,new Set([t]))}(e,t))}var _t={updateRetainCount:function(e,t,n){var r;if(!x("recoil_memory_managament_2020"))return;const o=e.getState().retention.referenceCounts,i=(null!==(r=o.get(t))&&void 0!==r?r:0)+n;0===i?St(e,t):o.set(t,i)},updateRetainCountToZero:St,releaseScheduledRetainablesNow:function(e){if(!x("recoil_memory_managament_2020"))return;const t=e.getState();vt(e,t.retention.retainablesToCheckForRelease),t.retention.retainablesToCheckForRelease.clear()},retainedByOptionWithDefault:function(e){return void 0===e?"recoilRoot":e}},Et={isSSR:"undefined"==typeof window,isReactNative:"undefined"!=typeof navigator&&"ReactNative"===navigator.product};const{isSSR:Tt}=Et,{batchUpdates:kt}=ze,{initializeNodeIfNewToStore:Ct,peekNodeInfo:Rt}=ge,{graph:At}=Xe,{DEFAULT_VALUE:Nt,recoilValues:Pt,recoilValuesForKeys:Ot}=ne,{AbstractRecoilValue:It,getRecoilValueAsLoadable:Dt,setRecoilValue:xt,setUnvalidatedRecoilValue:jt}=Me,{updateRetainCount:Mt}=_t,{getNextTreeStateVersion:Lt,makeEmptyStoreState:Vt}=ut;class Bt{constructor(e){V(this,"_store",void 0),V(this,"_refCount",0),V(this,"getLoadable",(e=>(this.checkRefCount_INTERNAL(),Dt(this._store,e)))),V(this,"getPromise",(e=>(this.checkRefCount_INTERNAL(),this.getLoadable(e).toPromise()))),V(this,"getNodes_UNSTABLE",(e=>{if(this.checkRefCount_INTERNAL(),!0===(null==e?void 0:e.isModified)){if(!1===(null==e?void 0:e.isInitialized))return[];const t=this._store.getState().currentTree;return Ot(t.dirtyAtoms)}const t=this._store.getState().knownAtoms,n=this._store.getState().knownSelectors;return null==(null==e?void 0:e.isInitialized)?Pt.values():!0===e.isInitialized?Ot(function*(e){for(const t of e)for(const e of t)yield e}([this._store.getState().knownAtoms,this._store.getState().knownSelectors])):M(Pt.values(),(({key:e})=>!t.has(e)&&!n.has(e)))})),V(this,"getInfo_UNSTABLE",(({key:e})=>(this.checkRefCount_INTERNAL(),Rt(this._store,this._store.getState().currentTree,e)))),V(this,"map",(e=>{this.checkRefCount_INTERNAL();const t=new Ht(this,kt);return e(t),Ft(t.getStore_INTERNAL())})),V(this,"asyncMap",(async e=>{this.checkRefCount_INTERNAL();const t=new Ht(this,kt);return await e(t),Ft(t.getStore_INTERNAL())})),this._store={getState:()=>e,replaceState:t=>{e.currentTree=t(e.currentTree)},getGraph:t=>{const n=e.graphsByVersion;if(n.has(t))return w(n.get(t));const r=At();return n.set(t,r),r},subscribeToTransactions:()=>({release:()=>{}}),addTransactionMetadata:()=>{throw new Error("Cannot subscribe to Snapshots")}};for(const t of this._store.getState().nodeCleanupFunctions.keys())Ct(this._store,e.currentTree,t,"get"),Mt(this._store,t,1);this.retain(),this.autorelease_INTERNAL()}retain(){if(!x("recoil_memory_managament_2020"))return()=>{};this._refCount++;let e=!1;return()=>{e||(e=!0,this.release_INTERNAL())}}autorelease_INTERNAL(){x("recoil_memory_managament_2020")&&(Tt||window.setTimeout((()=>this.release_INTERNAL()),0))}release_INTERNAL(){x("recoil_memory_managament_2020")&&(this._refCount--,this._refCount)}checkRefCount_INTERNAL(){x("recoil_memory_managament_2020")&&this._refCount}getStore_INTERNAL(){return this.checkRefCount_INTERNAL(),this._store}getID(){return this.checkRefCount_INTERNAL(),this.getID_INTERNAL()}getID_INTERNAL(){return this.checkRefCount_INTERNAL(),this._store.getState().currentTree.stateID}}function Ut(e,t,n=!1){const r=e.getState(),o=n?Lt():t.version;return{currentTree:n?{version:o,stateID:o,transactionMetadata:{...t.transactionMetadata},dirtyAtoms:new Set(t.dirtyAtoms),atomValues:t.atomValues.clone(),nonvalidatedAtoms:t.nonvalidatedAtoms.clone()}:t,commitDepth:0,nextTree:null,previousTree:null,knownAtoms:new Set(r.knownAtoms),knownSelectors:new Set(r.knownSelectors),transactionSubscriptions:new Map,nodeTransactionSubscriptions:new Map,nodeToComponentSubscriptions:new Map,queuedComponentCallbacks_DEPRECATED:[],suspendedComponentResolvers:new Set,graphsByVersion:(new Map).set(o,e.getGraph(t.version)),versionsUsedByComponent:new Map,retention:{referenceCounts:new Map,nodesRetainedByZone:new Map,retainablesToCheckForRelease:new Set},nodeCleanupFunctions:new Map}}function Ft(e,t="current"){const n=e.getState(),r="current"===t?n.currentTree:w(n.previousTree);return new Bt(Ut(e,r))}class Ht extends Bt{constructor(e,t){super(Ut(e.getStore_INTERNAL(),e.getStore_INTERNAL().getState().currentTree,!0)),V(this,"_batch",void 0),V(this,"set",((e,t)=>{this.checkRefCount_INTERNAL();const n=this.getStore_INTERNAL();this._batch((()=>{Mt(n,e.key,1),xt(this.getStore_INTERNAL(),e,t)}))})),V(this,"reset",(e=>{this.checkRefCount_INTERNAL();const t=this.getStore_INTERNAL();this._batch((()=>{Mt(t,e.key,1),xt(this.getStore_INTERNAL(),e,Nt)}))})),V(this,"setUnvalidatedAtomValues_DEPRECATED",(e=>{this.checkRefCount_INTERNAL();const t=this.getStore_INTERNAL();kt((()=>{for(const[n,r]of e.entries())Mt(t,n,1),jt(t,new It(n),r)}))})),this._batch=t}}var Wt={Snapshot:Bt,MutableSnapshot:Ht,freshSnapshot:function(e){const t=new Bt(Vt());return null!=e?t.map(e):t},cloneSnapshot:Ft},zt=Wt.Snapshot,qt=Wt.MutableSnapshot,Gt=Wt.freshSnapshot,Kt=Wt.cloneSnapshot,$t=Object.freeze({__proto__:null,Snapshot:zt,MutableSnapshot:qt,freshSnapshot:Gt,cloneSnapshot:Kt});const{getNextTreeStateVersion:Zt,makeEmptyStoreState:Jt}=ut,{cleanUpNode:Xt,getDownstreamNodes:Qt,setNodeValue:Yt,setUnvalidatedAtomValue_DEPRECATED:en}=ge,{graph:tn}=Xe,{cloneGraph:nn}=Xe,{applyAtomValueWrites:rn}=Me,{releaseScheduledRetainablesNow:on}=_t,{freshSnapshot:sn}=$t,{useCallback:an,useContext:cn,useEffect:un,useMemo:ln,useRef:hn,useState:fn}=e.default;function dn(){throw new Error("This component must be used inside a <RecoilRoot> component.")}const pn=Object.freeze({getState:dn,replaceState:dn,getGraph:dn,subscribeToTransactions:dn,addTransactionMetadata:dn});let gn=!1;function yn(e){if(gn)throw new Error("An atom update was triggered within the execution of a state updater function. State updater functions provided to Recoil must be pure functions.");const t=e.getState();if(null===t.nextTree){x("recoil_memory_managament_2020")&&x("recoil_release_on_cascading_update_killswitch_2021")&&t.commitDepth>0&&on(e);const n=t.currentTree.version,r=Zt();t.nextTree={...t.currentTree,version:r,stateID:r,dirtyAtoms:new Set,transactionMetadata:{}},t.graphsByVersion.set(r,nn(w(t.graphsByVersion.get(n))))}}const vn=e.default.createContext({current:pn}),mn=()=>cn(vn),bn=e.default.createContext(null);function wn(e,t,n){const r=Qt(e,n,n.dirtyAtoms);for(const e of r){const r=t.nodeToComponentSubscriptions.get(e);if(r)for(const[e,[t,o]]of r)o(n)}}function Sn(e){const t=e.getState(),n=t.currentTree,r=n.dirtyAtoms;if(r.size){for(const[n,o]of t.nodeTransactionSubscriptions)if(r.has(n))for(const[t,n]of o)n(e);for(const[n,r]of t.transactionSubscriptions)r(e);x("recoil_early_rendering_2021")&&!t.suspendedComponentResolvers.size||(wn(e,t,n),t.suspendedComponentResolvers.forEach((e=>e())),t.suspendedComponentResolvers.clear())}t.queuedComponentCallbacks_DEPRECATED.forEach((e=>e(n))),t.queuedComponentCallbacks_DEPRECATED.splice(0,t.queuedComponentCallbacks_DEPRECATED.length)}function _n({setNotifyBatcherOfChange:e}){const t=mn(),[n,r]=fn([]);return e((()=>r({}))),un((()=>{qe("Batcher",(()=>{!function(e){const t=e.current.getState();t.commitDepth++;try{const{nextTree:n}=t;if(null===n)return;t.previousTree=t.currentTree,t.currentTree=n,t.nextTree=null,Sn(e.current),null!=t.previousTree&&t.graphsByVersion.delete(t.previousTree.version),t.previousTree=null,x("recoil_memory_managament_2020")&&on(e.current)}finally{t.commitDepth--}}(t)}))})),un((()=>()=>{e((()=>{}))}),[e]),null}let En=0;function Tn({initializeState_DEPRECATED:t,initializeState:n,store_INTERNAL:r,children:o}){var i;let s;const a=hn(null),c=an((e=>{a.current=e}),[a]),u=null!==(i=e.default.createMutableSource)&&void 0!==i?i:e.default.unstable_createMutableSource,l=null!=r?r:{getState:()=>s.current,replaceState:e=>{const t=h.current.getState();yn(h.current);const n=w(t.nextTree);let r;try{gn=!0,r=e(n)}finally{gn=!1}r!==n&&(t.nextTree=r,x("recoil_early_rendering_2021")&&wn(l,t,r),w(a.current)())},getGraph:e=>{const t=s.current.graphsByVersion;if(t.has(e))return w(t.get(e));const n=tn();return t.set(e,n),n},subscribeToTransactions:(e,t)=>{if(null==t){const{transactionSubscriptions:t}=h.current.getState(),n=En++;return t.set(n,e),{release:()=>{t.delete(n)}}}{const{nodeTransactionSubscriptions:n}=h.current.getState();n.has(t)||n.set(t,new Map);const r=En++;return w(n.get(t)).set(r,e),{release:()=>{const e=n.get(t);e&&(e.delete(r),0===e.size&&n.delete(t))}}}},addTransactionMetadata:e=>{yn(h.current);for(const t of Object.keys(e))w(h.current.getState().nextTree).transactionMetadata[t]=e[t]}},h=hn(l);s=hn(null!=t?function(e,t){const n=Jt();return t({set:(t,r)=>{const o=n.currentTree,i=Yt(e,o,t.key,r),s=new Set(i.keys()),a=o.nonvalidatedAtoms.clone();for(const e of s)a.delete(e);n.currentTree={...o,dirtyAtoms:lt(o.dirtyAtoms,s),atomValues:rn(o.atomValues,i),nonvalidatedAtoms:a}},setUnvalidatedAtomValues:e=>{e.forEach(((e,t)=>{n.currentTree=en(n.currentTree,t,e)}))}}),n}(l,t):null!=n?function(e){return sn().map(e).getStore_INTERNAL().getState()}(n):Jt());const f=ln((()=>u?u(s,(()=>s.current.currentTree.version)):null),[u,s]);return un((()=>()=>{for(const e of h.current.getState().knownAtoms)Xt(h.current,e)}),[]),e.default.createElement(vn.Provider,{value:h},e.default.createElement(bn.Provider,{value:f},e.default.createElement(_n,{setNotifyBatcherOfChange:c}),o))}var kn={useStoreRef:mn,useRecoilMutableSource:function(){const e=cn(bn);return e},RecoilRoot:function(t){const{override:n,...r}=t,o=mn();return!1===n&&o.current!==pn?t.children:e.default.createElement(Tn,r)},notifyComponents_FOR_TESTING:wn,sendEndOfBatchNotifications_FOR_TESTING:Sn};const{loadableWithValue:Cn}=A,{DEFAULT_VALUE:Rn,getNode:An}=ne,{copyTreeState:Nn,getRecoilValueAsLoadable:Pn,invalidateDownstreams:On,writeLoadableToTreeState:In}=Me;function Dn(e){return"atom"===An(e.key).nodeType}class xn{constructor(e,t){V(this,"_store",void 0),V(this,"_treeState",void 0),V(this,"_changes",void 0),V(this,"get",(e=>{if(this._changes.has(e.key))return this._changes.get(e.key);if(!Dn(e))throw new Error("Reading selectors within atomicUpdate is not supported");const t=Pn(this._store,e,this._treeState);if("hasValue"===t.state)return t.contents;throw"hasError"===t.state?t.contents:new Error(`Expected Recoil atom ${e.key} to have a value, but it is in a loading state.`)})),V(this,"set",((e,t)=>{if(!Dn(e))throw new Error("Setting selectors within atomicUpdate is not supported");if("function"==typeof t){const n=this.get(e);this._changes.set(e.key,t(n))}else this._changes.set(e.key,t)})),V(this,"reset",(e=>{this.set(e,Rn)})),this._store=e,this._treeState=t,this._changes=new Map}newTreeState_INTERNAL(){if(0===this._changes.size)return this._treeState;const e=Nn(this._treeState);for(const[t,n]of this._changes)In(e,t,Cn(n));return On(this._store,e),e}}var jn=function(e){return t=>{e.replaceState((n=>{const r=new xn(e,n);return t(r),r.newTreeState_INTERNAL()}))}},Mn=Object.freeze({__proto__:null,atomicUpdater:jn}),Ln=function(e,t){if(!e)throw new Error(t)};const{useRef:Vn}=e.default;var Bn=function(){return Vn(),"<component name not available>"};const{atomicUpdater:Un}=Mn,{batchUpdates:Fn}=ze,{DEFAULT_VALUE:Hn,getNode:Wn,nodes:zn}=ne,{useRecoilMutableSource:qn,useStoreRef:Gn}=kn,{isRecoilValue:Kn}=K,{AbstractRecoilValue:$n,getRecoilValueAsLoadable:Zn,setRecoilValue:Jn,setRecoilValueLoadable:Xn,setUnvalidatedRecoilValue:Qn,subscribeToRecoilValue:Yn}=Me,{updateRetainCount:er}=_t,{RetentionZone:tr}=oe,{Snapshot:nr,cloneSnapshot:rr}=$t,{setByAddingToSet:or}=j,{isSSR:ir}=Et,{mutableSourceExists:sr,useMutableSource:ar}=P,{useCallback:cr,useEffect:ur,useMemo:lr,useRef:hr,useState:fr}=e.default,dr=12e4;function pr(e,t,n){if("hasValue"===e.state)return e.contents;if("loading"===e.state)throw new Promise((e=>{n.current.getState().suspendedComponentResolvers.add(e)}));if("hasError"===e.state)throw e.contents;throw new Error(`Invalid value of loadable atom "${t.key}"`)}function gr(e){return x("recoil_memory_managament_2020")&&Tr(e),sr()?function(e){const t=Gn(),n=cr((()=>{var n;const r=t.current,o=r.getState(),i=x("recoil_early_rendering_2021")&&null!==(n=o.nextTree)&&void 0!==n?n:o.currentTree;return Zn(r,e,i)}),[t,e]),r=cr((()=>n()),[n]),o=Bn(),i=cr(((r,i)=>{const s=t.current;return Yn(s,e,(()=>{if(!x("recoil_suppress_rerender_in_callback"))return i();const e=n();c.current.is(e)||i(),c.current=e}),o).release}),[t,e,o,n]),s=qn(),a=ar(s,r,i),c=hr(a);return ur((()=>{c.current=a})),a}(e):function(e){const t=Gn(),[n,r]=fr([]),o=Bn();ur((()=>{const n=t.current,i=n.getState(),a=Yn(n,e,(t=>{var o;if(!x("recoil_suppress_rerender_in_callback"))return r([]);const i=Zn(n,e,n.getState().currentTree);(null===(o=s.current)||void 0===o?void 0:o.is(i))||r(i),s.current=i}),o);if(i.nextTree)n.getState().queuedComponentCallbacks_DEPRECATED.push((()=>{s.current=null,r([])}));else{var c;if(!x("recoil_suppress_rerender_in_callback"))return r([]);const t=Zn(n,e,n.getState().currentTree);(null===(c=s.current)||void 0===c?void 0:c.is(t))||r(t),s.current=t}return a.release}),[o,e,t]);const i=Zn(t.current,e),s=hr(i);return ur((()=>{s.current=i})),i}(e)}function yr(e){const t=Gn();return pr(gr(e),e,t)}function vr(e){const t=Gn();return cr((n=>{Jn(t.current,e,n)}),[t,e])}function mr(e){const t=Gn();ur((()=>t.current.subscribeToTransactions(e).release),[e,t])}function br(e){const t=e.atomValues.toMap(),n=Ke(function(e,t){const n=new Map;for(const[r,o]of e)t(o,r)&&n.set(r,o);return n}(t,((e,t)=>{const n=Wn(t).persistence_UNSTABLE;return null!=n&&"none"!==n.type&&"hasValue"===e.state})),(e=>e.contents));return function(...e){const t=new Map;for(let n=0;n<e.length;n++){const r=e[n].keys();let o;for(;!(o=r.next()).done;)t.set(o.value,e[n].get(o.value))}return t}(e.nonvalidatedAtoms.toMap(),n)}function wr(e){const t=hr();return ur((()=>{t.current=e})),t.current}function Sr(){const e=Gn();return cr((t=>{var n;const r=e.current.getState(),o=null!==(n=r.nextTree)&&void 0!==n?n:r.currentTree,i=t.getStore_INTERNAL().getState().currentTree;Fn((()=>{const n=new Set;for(const e of[o.atomValues.keys(),i.atomValues.keys()])for(const t of e){var r,s;(null===(r=o.atomValues.get(t))||void 0===r?void 0:r.contents)!==(null===(s=i.atomValues.get(t))||void 0===s?void 0:s.contents)&&Wn(t).shouldRestoreFromSnapshots&&n.add(t)}n.forEach((t=>{Xn(e.current,new $n(t),i.atomValues.has(t)?w(i.atomValues.get(t)):Hn)})),e.current.replaceState((e=>({...e,stateID:t.getID_INTERNAL()})))}))}),[e])}class _r{}const Er=new _r;function Tr(e){if(x("recoil_memory_managament_2020"))return function(e){const t=(Array.isArray(e)?e:[e]).map((e=>e instanceof tr?e:e.key)),n=Gn();ur((()=>{if(!x("recoil_memory_managament_2020"))return;const e=n.current;if(r.current&&!ir)window.clearTimeout(r.current),r.current=null;else for(const n of t)er(e,n,1);return()=>{for(const n of t)er(e,n,-1)}}),[n,...t]);const r=hr(),o=wr(t);if(!(ir||void 0!==o&&function(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0}(o,t))){const e=n.current;for(const n of t)er(e,n,1);if(o)for(const t of o)er(e,t,-1);r.current&&window.clearTimeout(r.current),r.current=window.setTimeout((()=>{r.current=null;for(const n of t)er(e,n,-1)}),dr)}}(e)}var kr={recoilComponentGetRecoilValueCount_FOR_TESTING:{current:0},useGotoRecoilSnapshot:Sr,useRecoilCallback:function(e,t){const n=Gn(),r=Sr();return cr(((...t)=>{function o(e,t){Jn(n.current,e,t)}function i(e){Jn(n.current,e,Hn)}const s=rr(n.current),a=Un(n.current);let c=Er;return Fn((()=>{const n="useRecoilCallback expects a function that returns a function: it accepts a function of the type (RecoilInterface) => T = R and returns a callback function T => R, where RecoilInterface is an object {snapshot, set, ...} and T and R are the argument and return types of the callback you want to create.  Please see the docs at recoiljs.org for details.";if("function"!=typeof e)throw new Error(n);const u=e({set:o,reset:i,snapshot:s,gotoSnapshot:r,transact_UNSTABLE:a});if("function"!=typeof u)throw new Error(n);c=u(...t)})),c instanceof _r&&Ln(!1),c}),null!=t?[...t,n]:void 0)},useRecoilInterface:function(){const e=Gn(),[t,n]=fr([]),r=hr(new Set);r.current=new Set;const o=hr(new Set),i=hr(new Map),s=cr((e=>{const t=i.current.get(e);t&&(t.release(),i.current.delete(e))}),[i]),a=Bn();return ur((()=>{const t=e.current;function c(e,t){i.current.has(t)&&n([])}Ge(r.current,o.current).forEach((e=>{if(i.current.has(e))return;const n=Yn(t,new $n(e),(t=>{c(0,e)}),a);i.current.set(e,n),t.getState().nextTree?t.getState().queuedComponentCallbacks_DEPRECATED.push((()=>{c(t.getState(),e)})):c(t.getState(),e)})),Ge(o.current,r.current).forEach((e=>{s(e)})),o.current=r.current})),ur((()=>{const e=i.current;return()=>e.forEach(((e,t)=>s(t)))}),[s]),lr((()=>{function t(t){return n=>{Jn(e.current,t,n)}}function n(t){var n;r.current.has(t.key)||(r.current=or(r.current,t.key));const o=e.current.getState();return Zn(e.current,t,x("recoil_early_rendering_2021")&&null!==(n=o.nextTree)&&void 0!==n?n:o.currentTree)}function o(t){return pr(n(t),t,e)}return{getRecoilValue:o,getRecoilValueLoadable:n,getRecoilState:function(e){return[o(e),t(e)]},getRecoilStateLoadable:function(e){return[n(e),t(e)]},getSetRecoilState:t,getResetRecoilState:function(t){return()=>Jn(e.current,t,Hn)}}}),[r,e])},useRecoilSnapshot:function(){const e=Gn(),[t,n]=fr((()=>rr(e.current))),r=wr(t),o=hr();return ur((()=>(o.current&&!ir&&window.clearTimeout(o.current),t.retain())),[t]),mr(cr((e=>n(rr(e))),[])),r===t||ir||(o.current&&(null==r||r.release_INTERNAL(),window.clearTimeout(o.current)),t.retain(),o.current=window.setTimeout((()=>{t.release_INTERNAL(),o.current=null}),dr)),t},useRecoilState:function(e){return[yr(e),vr(e)]},useRecoilStateLoadable:function(e){return[gr(e),vr(e)]},useRecoilTransaction:function(e,t){const n=Gn();return lr((()=>(...t)=>{Un(n.current)((n=>{e(n)(...t)}))}),null!=t?[...t,n]:void 0)},useRecoilTransactionObserver:function(e){mr(cr((t=>{const n=rr(t,"current"),r=rr(t,"previous");e({snapshot:n,previousSnapshot:r})}),[e]))},useRecoilValue:yr,useRecoilValueLoadable:gr,useRetain:Tr,useResetRecoilState:function(e){const t=Gn();return cr((()=>{Jn(t.current,e,Hn)}),[t,e])},useSetRecoilState:vr,useSetUnvalidatedAtomValues:function(){const e=Gn();return(t,n={})=>{Fn((()=>{e.current.addTransactionMetadata(n),t.forEach(((t,n)=>Qn(e.current,new $n(n),t)))}))}},useTransactionObservation_DEPRECATED:function(e){mr(cr((t=>{let n=t.getState().previousTree;const r=t.getState().currentTree;n||(n=t.getState().currentTree);const o=br(r),i=br(n),s=Ke(zn,(e=>{var t,n,r,o;return{persistence_UNSTABLE:{type:null!==(t=null===(n=e.persistence_UNSTABLE)||void 0===n?void 0:n.type)&&void 0!==t?t:"none",backButton:null!==(r=null===(o=e.persistence_UNSTABLE)||void 0===o?void 0:o.backButton)&&void 0!==r&&r}}})),a=function(e,t){const n=new Set;for(const r of e)t(r)&&n.add(r);return n}(r.dirtyAtoms,(e=>o.has(e)||i.has(e)));e({atomValues:o,previousAtomValues:i,atomInfo:s,modifiedAtoms:a,transactionMetadata:{...r.transactionMetadata}})}),[e]))},useTransactionSubscription_DEPRECATED:mr};const{peekNodeInfo:Cr}=ge,{useStoreRef:Rr}=kn;const{RecoilRoot:Ar,useStoreRef:Nr}=kn,{useMemo:Pr}=e.default;const{isReactNative:Or,isSSR:Ir}=Et;function Dr(e,t,n){if("string"==typeof e&&!e.includes('"')&&!e.includes("\\"))return`"${e}"`;switch(typeof e){case"undefined":return"";case"boolean":return e?"true":"false";case"number":case"symbol":return String(e);case"string":return JSON.stringify(e);case"function":if(!0!==(null==t?void 0:t.allowFunctions))throw new Error("Attempt to serialize function in a Recoil cache key");return`__FUNCTION(${e.name})__`}if(null===e)return"null";var r;if("object"!=typeof e)return null!==(r=JSON.stringify(e))&&void 0!==r?r:"";if(b(e))return"__PROMISE__";if(Array.isArray(e))return`[${e.map(((e,n)=>Dr(e,t,n.toString())))}]`;if("function"==typeof e.toJSON)return Dr(e.toJSON(n),t,n);if(e instanceof Map){const r={};for(const[n,o]of e)r["string"==typeof n?n:Dr(n,t)]=o;return Dr(r,t,n)}return e instanceof Set?Dr(Array.from(e).sort(((e,n)=>Dr(e,t).localeCompare(Dr(n,t)))),t,n):void 0!==Symbol&&null!=e[Symbol.iterator]&&"function"==typeof e[Symbol.iterator]?Dr(Array.from(e),t,n):`{${Object.keys(e).filter((t=>void 0!==e[t])).sort().map((n=>`${Dr(n,t)}:${Dr(e[n],t,n)}`)).join(",")}}`}var xr=function(e,t={allowFunctions:!1}){return Dr(e,t)};const jr=(e,t,n)=>{var r;if(null==e)return;if(null==n||null===(r=n.onNodeVisit)||void 0===r||r.call(n,e),"leaf"===e.type)return e;const o=t(e.nodeKey);return jr(e.branches.get(o),t,n)},Mr=(e,t,n,r,o,i)=>{var s;let a;if(null==e)if(0===t.length)a={type:"leaf",value:r,parent:n,branchKey:o};else{const[e,...s]=t,[c,u]=e;a={type:"branch",nodeKey:c,parent:n,branches:new Map,branchKey:o},a.branches.set(u,Mr(null,s,a,r,u,i))}else if(a=e,t.length){const[n,...o]=t,[s,a]=n;("branch"!==e.type||e.nodeKey!==s)&&Ln(!1),e.branches.set(a,Mr(e.branches.get(a),o,e,r,a,i))}return null==i||null===(s=i.onNodeVisit)||void 0===s||s.call(i,a),a},Lr=(e,t,n)=>n?(0===t.branches.size&&n.branches.delete(t.branchKey),Lr(e,n,n.parent)):e===t,Vr=e=>"leaf"===e.type?1:Array.from(e.branches.values()).reduce(((e,t)=>e+Vr(t)),0);var Br=Object.freeze({__proto__:null,TreeCache:class{constructor(e){var t,n,r;V(this,"_numLeafs",void 0),V(this,"_root",void 0),V(this,"_onHit",void 0),V(this,"_onSet",void 0),V(this,"_mapNodeValue",void 0),this._numLeafs=0,this._root=null,this._onHit=null!==(t=null==e?void 0:e.onHit)&&void 0!==t?t:()=>{},this._onSet=null!==(n=null==e?void 0:e.onSet)&&void 0!==n?n:()=>{},this._mapNodeValue=null!==(r=null==e?void 0:e.mapNodeValue)&&void 0!==r?r:e=>e}size(){return this._numLeafs}root(){return this._root}get(e,t){var n;return null===(n=this.getLeafNode(e,t))||void 0===n?void 0:n.value}getLeafNode(e,t){return jr(this.root(),(t=>this._mapNodeValue(e(t))),{onNodeVisit:e=>{null==t||t.onNodeVisit(e),"leaf"===e.type&&this._onHit(e)}})}set(e,t,n){let r;const o=Mr(this.root(),e.map((([e,t])=>[e,this._mapNodeValue(t)])),null,t,null,{onNodeVisit:e=>{null==n||n.onNodeVisit(e),"leaf"===e.type&&(r=e)}});this.root()||(this._root=o),this._numLeafs++,this._onSet(w(r))}delete(e){if(!this.root())return!1;const t=w(this.root());return!!((e,t,n)=>n?(n.branches.delete(t.branchKey),Lr(e,n,n.parent)):e===t)(t,e,e.parent)&&(e===t||"branch"===t.type&&!t.branches.size?(this._root=null,this._numLeafs=0,!0):(this._numLeafs-=Vr(e),!0))}clear(){this._numLeafs=0,this._root=null}}}),Ur=Object.freeze({__proto__:null,LRUCache:class{constructor(e){var t;V(this,"_maxSize",void 0),V(this,"_size",void 0),V(this,"_head",void 0),V(this,"_tail",void 0),V(this,"_map",void 0),V(this,"_keyMapper",void 0),this._maxSize=e.maxSize,this._size=0,this._head=null,this._tail=null,this._map=new Map,this._keyMapper=null!==(t=e.mapKey)&&void 0!==t?t:e=>e}head(){return this._head}tail(){return this._tail}size(){return this._size}maxSize(){return this._maxSize}has(e){return this._map.has(this._keyMapper(e))}get(e){const t=this._keyMapper(e),n=this._map.get(t);if(n)return this.set(e,n.value),n.value}set(e,t){const n=this._keyMapper(e);this._map.get(n)&&this.delete(e);const r=this.head(),o={key:e,right:r,left:null,value:t};r?r.left=o:this._tail=o,this._map.set(n,o),this._head=o,this._size++,this._maybeDeleteLRU()}_maybeDeleteLRU(){this.size()>this.maxSize()&&this.deleteLru()}deleteLru(){const e=this.tail();e&&this.delete(e.key)}delete(e){const t=this._keyMapper(e);if(!this._size||!this._map.has(t))return;const n=w(this._map.get(t)),r=n.right,o=n.left;r&&(r.left=n.left),o&&(o.right=n.right),n===this.head()&&(this._head=r),n===this.tail()&&(this._tail=o),this._map.delete(t),this._size--}clear(){this._size=0,this._head=null,this._tail=null,this._map=new Map}}});const{LRUCache:Fr}=Ur,{TreeCache:Hr}=Br;var Wr=function(e,t=(e=>e)){const n=new Fr({maxSize:e}),r=new Hr({mapNodeValue:t,onHit:e=>{n.set(e,!0)},onSet:t=>{const o=n.tail();n.set(t,!0),o&&r.size()>e&&r.delete(o.key)}});return r};const{TreeCache:zr}=Br,qr={equality:"reference",eviction:"keep-all",maxSize:1/0};const{CANCELED:Gr,Canceled:Kr,loadableWithError:$r,loadableWithPromise:Zr,loadableWithValue:Jr}=A,{getNodeLoadable:Xr,peekNodeLoadable:Qr,setNodeValue:Yr}=ge,{saveDependencyMapToStore:eo}=Xe,{DEFAULT_VALUE:to,RecoilValueNotReady:no,getConfigDeletionHandler:ro,registerNode:oo}=ne,{isRecoilValue:io}=K,{AbstractRecoilValue:so}=K,{setRecoilValueLoadable:ao}=Me,{retainedByOptionWithDefault:co}=_t,{cloneSnapshot:uo}=$t,{startPerfBlock:lo}={startPerfBlock:function(e){return()=>null}},ho=[],fo=new Map,po=(()=>{let e=0;return()=>e++})();var go=function(e){const{key:t,get:n,cachePolicy_UNSTABLE:r}=e,o=null!=e.set?e.set:void 0,i=function({equality:e=qr.equality,eviction:t=qr.eviction,maxSize:n=qr.maxSize}=qr){const r=function(e){switch(e){case"reference":return e=>e;case"value":return e=>xr(e)}throw new Error(`Unrecognized equality policy ${e}`)}(e),o=function(e,t,n){switch(e){case"keep-all":return new zr({mapNodeValue:n});case"lru":return Wr(w(t),n);case"most-recent":return Wr(1,n)}throw new Error(`Unrecognized eviction policy ${e}`)}(t,n,r);return o}(null!=r?r:{equality:"reference",eviction:"keep-all"}),s=co(e.retainedBy_UNSTABLE),a=new Map;let c=0;function u(){return!x("recoil_memory_managament_2020")||c>0}function l(e){return a.has(e)||a.set(e,{depValuesDiscoveredSoFarDuringAsyncWork:null,latestLoadable:null,latestExecutionId:null,stateVersion:null}),w(a.get(e))}function h(e){return c++,e.getState().knownSelectors.add(t),()=>{c--,e.getState().knownSelectors.delete(t),a.delete(e)}}function f(){return void 0!==ro(t)&&!u()}function d(e,t,n){if("loading"===t.state){let t=fo.get(n);null==t&&fo.set(n,t=new Set),t.add(e)}}function p(e,t,n){const r=e.getState().knownSelectors.has(n);if(r&&t.atomValues.has(n))return w(t.atomValues.get(n));const o=Xr(e,t,n);return"loading"!==o.state&&r&&t.atomValues.set(n,o),o}function g(e,n,r,o,i){return n.then((n=>{if(!u())return R(e,i),Gr;if(n instanceof Kr)return Gr;const{__key:o,__value:s}=null!=n?n:{};let a=!0;null!=o&&(r.atomValues.set(o,Jr(s)),a=!1);const c=S(e,r);if(c&&"hasValue"===c.state)return k(c,e),{__value:c.contents,__key:t};if(!A(e,i)){var l;const e=E(r);if("loading"===(null==e||null===(l=e.latestLoadable)||void 0===l?void 0:l.state))return e.latestLoadable.contents}const[h,f]=m(e,r,i,a);if(A(e,i)&&C(f,e,i),N(h),"loading"!==h.state&&(O(r,_(f),h),v(e,r,new Set(f.keys()),i),y(e,h,i)),"hasError"===h.state)throw h.contents;return"hasValue"===h.state?{__value:h.contents,__key:t}:h.contents})).catch((t=>{if(!u())return R(e,i),Gr;const n=$r(t);throw P(),O(r,_(o),$r(t)),v(e,r,new Set(o.keys()),i),y(e,n,i),t}))}function y(e,n,r){A(e,r)&&(k(n,e),function(e,n){const r=fo.get(n);if(void 0!==r){for(const n of r)ao(n,new so(t),e);fo.delete(n)}}(n,r))}function v(e,n,r,o){var i,s,a,c,u,l,h;(A(e,o)||n.version===(null===(i=e.getState())||void 0===i||null===(s=i.currentTree)||void 0===s?void 0:s.version)||n.version===(null===(a=e.getState())||void 0===a||null===(c=a.nextTree)||void 0===c?void 0:c.version))&&eo(new Map([[t,r]]),e,null!==(u=null===(l=e.getState())||void 0===l||null===(h=l.nextTree)||void 0===h?void 0:h.version)&&void 0!==u?u:e.getState().currentTree.version)}function m(e,r,o,i=!1){const s=lo(t);let a,c,l=!1;const h=new Map,f=new Set;function d(t){const{key:n}=t;!function(e,t,n,r,o){n.add(r),v(e,t,n,o)}(e,r,f,n,o);const s=i?Xr(e,r,n):p(e,r,n);if(N(s),h.set(n,s),"hasValue"===s.state)return s.contents;throw s.contents}v(e,r,f,o);let m=!1;const w=t=>(...n)=>{if(!m)throw new Error("getCallback() should only be called asynchronously after the selector is evalutated.  It can be used for selectors to return objects with callbacks that can obtain the current Recoil state without a subscription.");const r=uo(e),o=t({snapshot:r});if("function"!=typeof o)throw new Error("getCallback() expects a function that returns a function.");return o(...n)};try{a=n({get:d,getCallback:w}),a=io(a)?d(a):a,m=!0,b(a)?a=function(e,n,r,o,i){return n.then((n=>{if(!u())return R(e,i),Gr;const s=Jr(n);return P(),O(r,_(o),s),v(e,r,new Set(o.keys()),i),y(e,s,i),{__value:n,__key:t}})).catch((t=>{if(!u())return R(e,i),Gr;if(A(e,i)&&C(o,e,i),b(t))return g(e,t,r,o,i);const n=$r(t);throw P(),O(r,_(o),n),v(e,r,new Set(o.keys()),i),y(e,n,i),t}))}(e,a,r,h,o).finally(s):s()}catch(t){a=t,b(a)?a=g(e,a,r,h,o).finally(s):(l=!0,s())}return c=l?$r(a):b(a)?Zr(a):Jr(a),N(c),[c,h]}function S(e,n){const r=new Set,o=l(e),s=i.get((t=>("string"!=typeof t&&Ln(!1),p(e,n,t).contents)),{onNodeVisit:e=>{"branch"===e.type&&e.nodeKey!==t&&"string"==typeof e.nodeKey&&r.add(e.nodeKey)}});return s&&v(e,n,r,o.latestExecutionId),s}function _(e){return Array.from(e.entries()).map((([e,t])=>[e,t.contents]))}function E(e){var t;const[,n]=null!==(t=Array.from(a.entries()).find((([t,n])=>null!=n.latestLoadable&&null!=n.latestExecutionId&&!function(e,t){var n,r;const o=l(e),i=null!==(n=o.depValuesDiscoveredSoFarDuringAsyncWork)&&void 0!==n?n:new Map,s=Array((null!==(r=T.get(t.version))&&void 0!==r?r:new Map).entries()),a=T.has(t.version)&&s.length===i.size&&s.every((([e,t])=>i.get(e)===t));return null!=i&&t.version!==o.stateVersion&&!a&&(T.set(t.version,new Map(i)),Array.from(i).some((([n,r])=>p(e,t,n).contents!==r.contents)))}(t,e))))&&void 0!==t?t:[];return n}const T=new Map;function k(e,t,n,r,o){const i=l(t);"loading"===e.state?(i.depValuesDiscoveredSoFarDuringAsyncWork=n,i.latestExecutionId=r,i.latestLoadable=e,i.stateVersion=null==o?void 0:o.version):(i.depValuesDiscoveredSoFarDuringAsyncWork=null,i.latestExecutionId=null,i.latestLoadable=null,i.stateVersion=null)}function C(e,t,n){const r=l(t);A(t,n)&&(r.depValuesDiscoveredSoFarDuringAsyncWork=e)}function R(e,t){A(e,t)&&a.delete(e)}function A(e,t){return t===l(e).latestExecutionId}function N(e){"loading"!==e.state&&P(e.contents)}function P(e){}function O(e,n,r){e.atomValues.set(t,r),i.set(n,r)}function I(e,t){return i.get((n=>{"string"!=typeof n&&Ln(!1);const r=Qr(e,t,n);return null==r?void 0:r.contents}))}function D(e,n){return function(r){if(ho.includes(t)){const e=`Recoil selector has circular dependencies: ${ho.slice(ho.indexOf(t)).join(" → ")}`;return $r(new Error(e))}ho.push(t);try{return function(e,t){const n=S(e,t);if(null!=n)return k(n,e),n;const r=E(t);if(r){const t=r;return d(e,w(t.latestLoadable),w(t.latestExecutionId)),w(t.latestLoadable)}return function(e,t){const n=po(),[r,o]=m(e,t,n);return k(r,e,o,n,t),function(e,t,n){"loading"!==n.state&&O(e,t,n)}(t,_(o),r),d(e,r,n),r}(e,t)}(e,n)}finally{ho.pop()}}()}function j(e){e.atomValues.delete(t)}if(null!=o){const n=(e,t,n)=>{let r=!1;const i=new Map;function s({key:n}){if(r)throw new Error("Recoil: Async selector sets are not currently supported.");const o=p(e,t,n);if(N(o),"hasValue"===o.state)return o.contents;throw"loading"===o.state?new no(n):o.contents}function a(n,o){if(r)throw new Error("Recoil: Async selector sets are not currently supported.");const a="function"==typeof o?o(s(n)):o;Yr(e,t,n.key,a).forEach(((e,t)=>i.set(t,e)))}const c=o({set:a,get:s,reset:function(e){a(e,to)}},n);if(void 0!==c)throw b(c)?new Error("Recoil: Async selector sets are not currently supported."):new Error("Recoil: selector set should be a void function.");return r=!0,i};return oo({key:t,nodeType:"selector",peek:I,get:D,set:n,init:h,invalidate:j,shouldDeleteConfigOnRelease:f,dangerouslyAllowMutability:e.dangerouslyAllowMutability,shouldRestoreFromSnapshots:!1,retainedBy:s})}return oo({key:t,nodeType:"selector",peek:I,get:D,init:h,invalidate:j,shouldDeleteConfigOnRelease:f,dangerouslyAllowMutability:e.dangerouslyAllowMutability,shouldRestoreFromSnapshots:!1,retainedBy:s})};const{loadableWithError:yo,loadableWithPromise:vo,loadableWithValue:mo}=A,{DEFAULT_VALUE:bo,DefaultValue:wo,getConfigDeletionHandler:So,registerNode:_o,setConfigDeletionHandler:Eo}=ne,{isRecoilValue:To}=K,{markRecoilValueModified:ko,setRecoilValue:Co,setRecoilValueLoadable:Ro}=Me,{retainedByOptionWithDefault:Ao}=_t;var No=function e(t){const{default:n,...r}=t;return To(n)?function(t){const n=e({...t,default:bo,persistence_UNSTABLE:void 0===t.persistence_UNSTABLE?void 0:{...t.persistence_UNSTABLE,validator:e=>e instanceof wo?e:w(t.persistence_UNSTABLE).validator(e,bo)},effects_UNSTABLE:t.effects_UNSTABLE}),r=go({key:`${t.key}__withFallback`,get:({get:e})=>{const r=e(n);return r instanceof wo?t.default:r},set:({set:e},t)=>e(n,t),dangerouslyAllowMutability:t.dangerouslyAllowMutability});return Eo(r.key,So(t.key)),r}({...r,default:n}):function(e){const{key:t,persistence_UNSTABLE:n}=e,r=Ao(e.retainedBy_UNSTABLE);let o,i=0,s=b(e.default)?vo(e.default.then((e=>(s=mo(e),{__key:t,__value:e}))).catch((e=>{throw s=yo(e),e}))):mo(e.default);const a=new Map,c=_o({key:t,nodeType:"atom",peek:function(e,n){var r,i,a;return null!==(r=null!==(i=n.atomValues.get(t))&&void 0!==i?i:null===(a=o)||void 0===a?void 0:a[1])&&void 0!==r?r:s},get:function(e,r){if(r.atomValues.has(t))return w(r.atomValues.get(t));if(r.nonvalidatedAtoms.has(t)){if(null!=o)return o;if(null==n)return s;const e=r.nonvalidatedAtoms.get(t),i=n.validator(e,bo),a=i instanceof wo?s:mo(i);return o=a,o}return s},set:function(e,n,r){if(n.atomValues.has(t)){const e=w(n.atomValues.get(t));if("hasValue"===e.state&&r===e.contents)return new Map}else if(!n.nonvalidatedAtoms.has(t)&&r instanceof wo)return new Map;return o=void 0,(new Map).set(t,mo(r))},init:function(n,r,o){i++;const u=n.getState().knownAtoms.has(t);if(n.getState().knownAtoms.add(t),"loading"===s.state){const e=()=>{var e;(null!==(e=n.getState().nextTree)&&void 0!==e?e:n.getState().currentTree).atomValues.has(t)||ko(n,c)};s.contents.then(e).catch(e)}let l=bo,h=null;if(null!=e.effects_UNSTABLE&&!u){let r=!0;const i=e=>t=>{if(r){const n=l instanceof wo||b(l)?"hasValue"===s.state?s.contents:bo:l;l="function"==typeof t?t(n):t,b(l)&&(l=l.then((t=>(h={effect:e,value:t},t))))}else{if(b(t))throw new Error("Setting atoms to async values is not implemented.");"function"!=typeof t&&(h={effect:e,value:t}),Co(n,c,"function"==typeof t?n=>{const r=t(n);return h={effect:e,value:r},r}:t)}},u=e=>()=>i(e)(bo),p=e=>r=>{n.subscribeToTransactions((n=>{var o;let{currentTree:i,previousTree:a}=n.getState();a||(a=i);const c=null!==(o=i.atomValues.get(t))&&void 0!==o?o:s;if("hasValue"===c.state){var u,l,f,d;const n=c.contents,o=null!==(u=a.atomValues.get(t))&&void 0!==u?u:s,i="hasValue"===o.state?o.contents:bo;(null===(l=h)||void 0===l?void 0:l.effect)!==e||(null===(f=h)||void 0===f?void 0:f.value)!==n?r(n,i):(null===(d=h)||void 0===d?void 0:d.effect)===e&&(h=null)}}),t)};for(const t of null!==(f=e.effects_UNSTABLE)&&void 0!==f?f:[]){var f;const e=t({node:c,trigger:o,setSelf:i(t),resetSelf:u(t),onSet:p(t)});var d;null!=e&&a.set(n,[...null!==(d=a.get(n))&&void 0!==d?d:[],e])}r=!1}if(!(l instanceof wo)){var p;const e=b(l)?vo(function(e,n){const r=n.then((n=>{var o,i;return(null===(i=(null!==(o=e.getState().nextTree)&&void 0!==o?o:e.getState().currentTree).atomValues.get(t))||void 0===i?void 0:i.contents)===r&&Co(e,c,n),{__key:t,__value:n}})).catch((n=>{var o,i;throw(null===(i=(null!==(o=e.getState().nextTree)&&void 0!==o?o:e.getState().currentTree).atomValues.get(t))||void 0===i?void 0:i.contents)===r&&Ro(e,c,yo(n)),n}));return r}(n,l)):mo(l);r.atomValues.set(t,e),null===(p=n.getState().nextTree)||void 0===p||p.atomValues.set(t,e)}return()=>{var e;i--,null===(e=a.get(n))||void 0===e||e.forEach((e=>e())),a.delete(n),n.getState().knownAtoms.delete(t)}},invalidate:function(){o=void 0},shouldDeleteConfigOnRelease:function(){return void 0!==So(t)&&i<=0},dangerouslyAllowMutability:e.dangerouslyAllowMutability,persistence_UNSTABLE:e.persistence_UNSTABLE?{type:e.persistence_UNSTABLE.type,backButton:e.persistence_UNSTABLE.backButton}:void 0,shouldRestoreFromSnapshots:!0,retainedBy:r});return c}({...r,default:n})},Po=Object.freeze({__proto__:null,MapCache:class{constructor(e){var t;V(this,"_map",void 0),V(this,"_keyMapper",void 0),this._map=new Map,this._keyMapper=null!==(t=null==e?void 0:e.mapKey)&&void 0!==t?t:e=>e}size(){return this._map.size}has(e){return this._map.has(this._keyMapper(e))}get(e){return this._map.get(this._keyMapper(e))}set(e,t){this._map.set(this._keyMapper(e),t)}delete(e){this._map.delete(this._keyMapper(e))}clear(){this._map.clear()}}});const{LRUCache:Oo}=Ur,{MapCache:Io}=Po,Do={equality:"reference",eviction:"none",maxSize:1/0};var xo=function({equality:e=Do.equality,eviction:t=Do.eviction,maxSize:n=Do.maxSize}=Do){const r=function(e){switch(e){case"reference":return e=>e;case"value":return e=>xr(e)}throw new Error(`Unrecognized equality policy ${e}`)}(e),o=function(e,t,n){switch(e){case"keep-all":return new Io({mapKey:n});case"lru":return new Oo({mapKey:n,maxSize:w(t)});case"most-recent":return new Oo({mapKey:n,maxSize:1})}throw new Error(`Unrecognized eviction policy ${e}`)}(t,n,r);return o};const{setConfigDeletionHandler:jo}=ne;const{setConfigDeletionHandler:Mo}=ne;let Lo=0;var Vo=function(e){var t,n;const r=xo({equality:null!==(t=null===(n=e.cachePolicyForParams_UNSTABLE)||void 0===n?void 0:n.equality)&&void 0!==t?t:"value",eviction:"keep-all"});return t=>{var n;const o=r.get(t);if(null!=o)return o;const i=`${e.key}__selectorFamily/${null!==(n=xr(t,{allowFunctions:!0}))&&void 0!==n?n:"void"}/${Lo++}`,s=n=>e.get(t)(n),a=e.cachePolicy_UNSTABLE,c="function"==typeof e.retainedBy_UNSTABLE?e.retainedBy_UNSTABLE(t):e.retainedBy_UNSTABLE;let u;if(null!=e.set){const n=e.set;u=go({key:i,get:s,set:(e,r)=>n(t)(e,r),cachePolicy_UNSTABLE:a,dangerouslyAllowMutability:e.dangerouslyAllowMutability,retainedBy_UNSTABLE:c})}else u=go({key:i,get:s,cachePolicy_UNSTABLE:a,dangerouslyAllowMutability:e.dangerouslyAllowMutability,retainedBy_UNSTABLE:c});return r.set(t,u),Mo(u.key,(()=>{r.delete(t)})),u}};const Bo=Vo({key:"__constant",get:e=>()=>e,cachePolicyForParams_UNSTABLE:{equality:"reference"}});const Uo=Vo({key:"__error",get:e=>()=>{throw new Error(e)},cachePolicyForParams_UNSTABLE:{equality:"reference"}});const{loadableWithError:Fo,loadableWithPromise:Ho,loadableWithValue:Wo}=A;function zo(e,t){const n=Array(t.length).fill(void 0),r=Array(t.length).fill(void 0);for(const[o,i]of t.entries())try{n[o]=e(i)}catch(e){r[o]=e}return[n,r]}function qo(e){return null!=e&&!b(e)}function Go(e){return Array.isArray(e)?e:Object.getOwnPropertyNames(e).map((t=>e[t]))}function Ko(e){return null!=e&&"object"==typeof e&&e.hasOwnProperty("__value")?e.__value:e}function $o(e,t){return Array.isArray(e)?t:Object.getOwnPropertyNames(e).reduce(((e,n,r)=>({...e,[n]:t[r]})),{})}function Zo(e,t,n){return $o(e,n.map(((e,n)=>null==e?Wo(t[n]):b(e)?Ho(e):Fo(e))))}const Jo=Vo({key:"__waitForNone",get:e=>({get:t})=>{const n=Go(e),[r,o]=zo(t,n);return Zo(e,r,o)},dangerouslyAllowMutability:!0}),Xo=Vo({key:"__waitForAny",get:e=>({get:t})=>{const n=Go(e),[r,o]=zo(t,n);return o.some((e=>!b(e)))?Zo(e,r,o):new Promise((t=>{for(const[n,i]of o.entries())b(i)&&i.then((i=>{r[n]=Ko(i),o[n]=void 0,t(Zo(e,r,o))})).catch((i=>{o[n]=i,t(Zo(e,r,o))}))}))},dangerouslyAllowMutability:!0}),Qo=Vo({key:"__waitForAll",get:e=>({get:t})=>{const n=Go(e),[r,o]=zo(t,n);if(o.every((e=>null==e)))return $o(e,r);const i=o.find(qo);if(null!=i)throw i;return Promise.all(o).then((t=>{return $o(e,(n=r,o=t,o.map(((e,t)=>void 0===e?n[t]:e))).map(Ko));var n,o}))},dangerouslyAllowMutability:!0}),Yo=Vo({key:"__waitForAllSettled",get:e=>({get:t})=>{const n=Go(e),[r,o]=zo(t,n);return o.every((e=>!b(e)))?Zo(e,r,o):Promise.all(o.map(((e,t)=>b(e)?e.then((e=>{r[t]=Ko(e),o[t]=void 0})).catch((e=>{r[t]=void 0,o[t]=e})):null))).then((()=>Zo(e,r,o)))},dangerouslyAllowMutability:!0});var ei={waitForNone:Jo,waitForAny:Xo,waitForAll:Qo,waitForAllSettled:Yo,noWait:Vo({key:"__noWait",get:e=>({get:t})=>{try{return Wo(t(e))}catch(e){return b(e)?Ho(e):Fo(e)}},dangerouslyAllowMutability:!0})};const{batchUpdates:ti,setBatcher:ni}=ze,{DefaultValue:ri}=ne,{RecoilRoot:oi}=kn,{isRecoilValue:ii}=K,{retentionZone:si}=oe,{freshSnapshot:ai}=$t,{useGotoRecoilSnapshot:ci,useRecoilCallback:ui,useRecoilSnapshot:li,useRecoilState:hi,useRecoilStateLoadable:fi,useRecoilTransaction:di,useRecoilTransactionObserver:pi,useRecoilValue:gi,useRecoilValueLoadable:yi,useResetRecoilState:vi,useRetain:mi,useSetRecoilState:bi,useSetUnvalidatedAtomValues:wi,useTransactionObservation_DEPRECATED:Si}=kr,{noWait:_i,waitForAll:Ei,waitForAllSettled:Ti,waitForAny:ki,waitForNone:Ci}=ei;var Ri={DefaultValue:ri,RecoilRoot:oi,useRecoilBridgeAcrossReactRoots_UNSTABLE:function(){const t=Nr().current;return Pr((()=>function({children:n}){return e.default.createElement(Ar,{store_INTERNAL:t},n)}),[t])},atom:No,selector:go,retentionZone:si,atomFamily:function(e){var t,n;const r=xo({equality:null!==(t=null===(n=e.cachePolicyForParams_UNSTABLE)||void 0===n?void 0:n.equality)&&void 0!==t?t:"value",eviction:"keep-all"});return t=>{var n;const o=r.get(t);if(null!=o)return o;const{cachePolicyForParams_UNSTABLE:i,...s}=e,a=No({...s,key:`${e.key}__${null!==(n=xr(t))&&void 0!==n?n:"void"}`,default:"function"==typeof e.default?e.default(t):e.default,retainedBy_UNSTABLE:"function"==typeof e.retainedBy_UNSTABLE?e.retainedBy_UNSTABLE(t):e.retainedBy_UNSTABLE,effects_UNSTABLE:"function"==typeof e.effects_UNSTABLE?e.effects_UNSTABLE(t):e.effects_UNSTABLE});return r.set(t,a),jo(a.key,(()=>{r.delete(t)})),a}},selectorFamily:Vo,constSelector:function(e){return Bo(e)},errorSelector:function(e){return Uo(e)},readOnlySelector:function(e){return e},useRecoilValue:gi,useRecoilValueLoadable:yi,useRecoilState:hi,useRecoilStateLoadable:fi,useSetRecoilState:bi,useResetRecoilState:vi,useGetRecoilValueInfo_UNSTABLE:function(){const e=Rr();return({key:t})=>Cr(e.current,e.current.getState().currentTree,t)},useRetain:mi,useRecoilCallback:ui,useRecoilTransaction_UNSTABLE:di,useGotoRecoilSnapshot:ci,useRecoilSnapshot:li,useRecoilTransactionObserver_UNSTABLE:pi,useTransactionObservation_UNSTABLE:Si,useSetUnvalidatedAtomValues_UNSTABLE:wi,noWait:_i,waitForNone:Ci,waitForAny:ki,waitForAll:Ei,waitForAllSettled:Ti,isRecoilValue:ii,batchUpdates:ti,setBatcher:ni,snapshot_UNSTABLE:ai},Ai=Ri.RecoilRoot,Ni=Ri.atom,Pi=Ri.selector,Oi=Ri.atomFamily,Ii=Ri.selectorFamily,Di=Ri.useRecoilValue,xi=Ri.useSetRecoilState;function ji(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Mi(e,t){if(e){if("string"==typeof e)return ji(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ji(e,t):void 0}}function Li(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],s=!0,a=!1;try{for(n=n.call(e);!(s=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);s=!0);}catch(e){a=!0,o=e}finally{try{s||null==n.return||n.return()}finally{if(a)throw o}}return i}}(e,t)||Mi(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Vi(e,t,n,r,o,i,s){try{var a=e[i](s),c=a.value}catch(e){return void n(e)}a.done?t(c):Promise.resolve(c).then(r,o)}function Bi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ui(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Bi(Object(n),!0).forEach((function(t){v(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Bi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Fi=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function s(e){Vi(i,r,o,s,a,"next",e)}function a(e){Vi(i,r,o,s,a,"throw",e)}s(void 0)}))}}(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://192.168.50.228:8181/api/devices").then((function(e){return e.json()})).catch((function(e){throw new Error(e.message)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Hi=Ni({key:"devicesState",default:new Map}),Wi=function(e,t){return e.DeviceInstanceId>t.DeviceInstanceId?1:-1},zi=function(e){var t,n=function(e){if(Array.isArray(e))return ji(e)}(t=e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||Mi(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}();return n.sort(Wi),n},qi=Pi({key:"devicesDescriptionsSelector",get:function(){return Fi().then(zi).catch((function(e){return console.log("getDevices error: ",e),[]}))}}),Gi=(Oi({key:"deviceItem",default:{DeviceId:0,DeviceType:"",IsFast:!1,Payload:{Channels:[],DetailsSequence:0,DeviceInstanceId:0,Sequence:0}}}),Ii({key:"deviceSelector",get:function(e){return function(t){return(0,t.get)(Hi).get(e)}}})),Ki=Pi({key:"devicesSelector",get:function(e){var t=(0,e.get)(Hi);return Array.from(t.values())},set:function(e,t){e.get;var n=e.set,r=t;n(Hi,(function(e){return r.forEach((function(t){var n="".concat(t.DeviceId,"-").concat(t.DeviceType);if(e.has(n)){var r=e.get(n);e.set(n,Ui(Ui({},r),t))}else e.set(n,t)})),new Map(e)}))}}),$i=i(322);function Zi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ji(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Zi(Object(n),!0).forEach((function(t){v(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Zi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Xi(t){var n=t.onStreamStart,r=t.onStreamStop,o=t.error,i=t.devicesConfiguration,s=Li((0,e.useState)(!1),2),a=s[0],c=s[1];return(0,$i.jsxs)("div",{className:"root",children:[(0,$i.jsxs)("section",{className:"header",children:[(0,$i.jsx)("h1",{className:"title",children:"Application Dashboard"}),(0,$i.jsx)("button",{className:"button",onClick:function(){return a?void r().then((function(){c(!1)})):void n().then((function(){c(!0)}),(function(){console.log("rejected")}))},children:a?"OFF":"ON"})]}),o&&(0,$i.jsx)("section",{className:"error",children:o}),(0,$i.jsx)("div",{className:"dashboard",children:(0,$i.jsx)("div",{className:"dashboardInner",children:null==i?void 0:i.map((function(e,t){return(0,$i.jsx)(Qi,{id:t+1,item:e},t)}))})})]})}var Qi=function(e){var t="".concat(e.item.DeviceInstanceId,"-").concat(e.item.Product.Model.toUpperCase()),n=Di(Gi(t));return(0,$i.jsxs)("div",{className:"item",children:[(0,$i.jsx)("div",{children:e.item.DeviceInstanceId}),(0,$i.jsx)("div",{children:n&&n.Payload?(0,$i.jsx)(Yi,Ji({},n.Payload)):(0,$i.jsx)("div",{})})]},e.id)},Yi=function(e){return(0,$i.jsxs)("div",{children:[(0,$i.jsxs)("div",{children:["DetailsSequence: ",e.DetailsSequence]}),(0,$i.jsxs)("div",{children:["DeviceInstanceId: ",e.DeviceInstanceId]}),(0,$i.jsx)("div",{children:e.Channels.map((function(e,t){return(0,$i.jsxs)("div",{children:[(0,$i.jsxs)("div",{children:["ChannelId: ",e.Id]}),(0,$i.jsxs)("div",{children:["RfQuality: ",e.RfQuality]})]},t)}))})]})};function es(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var ts,ns,rs=(ts=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}ts(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),os=function(e){function t(t,n){var r=this,o=this.constructor.prototype;return(r=e.call(this,t)||this).statusCode=n,r.__proto__=o,r}return rs(t,e),t}(Error),is=function(e){function t(t){void 0===t&&(t="A timeout occurred.");var n=this,r=this.constructor.prototype;return(n=e.call(this,t)||this).__proto__=r,n}return rs(t,e),t}(Error),ss=function(e){function t(t){void 0===t&&(t="An abort occurred.");var n=this,r=this.constructor.prototype;return(n=e.call(this,t)||this).__proto__=r,n}return rs(t,e),t}(Error),as=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},cs=function(e,t,n){this.statusCode=e,this.statusText=t,this.content=n},us=function(){function e(){}return e.prototype.get=function(e,t){return this.send(as({},t,{method:"GET",url:e}))},e.prototype.post=function(e,t){return this.send(as({},t,{method:"POST",url:e}))},e.prototype.delete=function(e,t){return this.send(as({},t,{method:"DELETE",url:e}))},e.prototype.getCookieString=function(e){return""},e}();!function(e){e[e.Trace=0]="Trace",e[e.Debug=1]="Debug",e[e.Information=2]="Information",e[e.Warning=3]="Warning",e[e.Error=4]="Error",e[e.Critical=5]="Critical",e[e.None=6]="None"}(ns||(ns={}));var ls=function(){function e(){}return e.prototype.log=function(e,t){},e.instance=new e,e}(),hs=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},fs=function(){function e(){}return e.isRequired=function(e,t){if(null==e)throw new Error("The '"+t+"' argument is required.")},e.isNotEmpty=function(e,t){if(!e||e.match(/^\s*$/))throw new Error("The '"+t+"' argument should not be empty.")},e.isIn=function(e,t,n){if(!(e in t))throw new Error("Unknown "+n+" value: "+e+".")},e}(),ds=function(){function e(){}return Object.defineProperty(e,"isBrowser",{get:function(){return"object"==typeof window},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isWebWorker",{get:function(){return"object"==typeof self&&"importScripts"in self},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isNode",{get:function(){return!this.isBrowser&&!this.isWebWorker},enumerable:!0,configurable:!0}),e}();function ps(e,t){var n="";return gs(e)?(n="Binary data of length "+e.byteLength,t&&(n+=". Content: '"+function(e){var t=new Uint8Array(e),n="";return t.forEach((function(e){n+="0x"+(e<16?"0":"")+e.toString(16)+" "})),n.substr(0,n.length-1)}(e)+"'")):"string"==typeof e&&(n="String data of length "+e.length,t&&(n+=". Content: '"+e+"'")),n}function gs(e){return e&&"undefined"!=typeof ArrayBuffer&&(e instanceof ArrayBuffer||e.constructor&&"ArrayBuffer"===e.constructor.name)}function ys(e,t,n,r,o,i,s,a,c){return u=this,l=void 0,f=function(){var u,l,h,f,d,p,g,y;return function(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}}(this,(function(v){switch(v.label){case 0:return l={},o?[4,o()]:[3,2];case 1:(h=v.sent())&&((u={}).Authorization="Bearer "+h,l=u),v.label=2;case 2:return f=bs(),d=f[0],p=f[1],l[d]=p,e.log(ns.Trace,"("+t+" transport) sending data. "+ps(i,s)+"."),g=gs(i)?"arraybuffer":"text",[4,n.post(r,{content:i,headers:hs({},l,c),responseType:g,withCredentials:a})];case 3:return y=v.sent(),e.log(ns.Trace,"("+t+" transport) request complete. Response status: "+y.statusCode+"."),[2]}}))},new((h=void 0)||(h=Promise))((function(e,t){function n(e){try{o(f.next(e))}catch(e){t(e)}}function r(e){try{o(f.throw(e))}catch(e){t(e)}}function o(t){t.done?e(t.value):new h((function(e){e(t.value)})).then(n,r)}o((f=f.apply(u,l||[])).next())}));var u,l,h,f}var vs=function(){function e(e,t){this.subject=e,this.observer=t}return e.prototype.dispose=function(){var e=this.subject.observers.indexOf(this.observer);e>-1&&this.subject.observers.splice(e,1),0===this.subject.observers.length&&this.subject.cancelCallback&&this.subject.cancelCallback().catch((function(e){}))},e}(),ms=function(){function e(e){this.minimumLogLevel=e,this.outputConsole=console}return e.prototype.log=function(e,t){if(e>=this.minimumLogLevel)switch(e){case ns.Critical:case ns.Error:this.outputConsole.error("["+(new Date).toISOString()+"] "+ns[e]+": "+t);break;case ns.Warning:this.outputConsole.warn("["+(new Date).toISOString()+"] "+ns[e]+": "+t);break;case ns.Information:this.outputConsole.info("["+(new Date).toISOString()+"] "+ns[e]+": "+t);break;default:this.outputConsole.log("["+(new Date).toISOString()+"] "+ns[e]+": "+t)}},e}();function bs(){var e,t,n,r,o,i,s="X-SignalR-User-Agent";return ds.isNode&&(s="User-Agent"),[s,(e="5.0.13",t=ws(),n=ds.isNode?"NodeJS":"Browser",r=Ss(),o="Microsoft SignalR/",i=e.split("."),o+=i[0]+"."+i[1],o+=" ("+e+"; ",o+=t&&""!==t?t+"; ":"Unknown OS; ",o+=""+n,o+=r?"; "+r:"; Unknown Runtime Version",o+=")")]}function ws(){if(!ds.isNode)return"";switch(process.platform){case"win32":return"Windows NT";case"darwin":return"macOS";case"linux":return"Linux";default:return process.platform}}function Ss(){if(ds.isNode)return process.versions.node}var _s,Es=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ts=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},ks=function(e){function t(t){var n=e.call(this)||this;if(n.logger=t,"undefined"==typeof fetch){var r=require;n.jar=new(r("tough-cookie").CookieJar),n.fetchType=r("node-fetch"),n.fetchType=r("fetch-cookie")(n.fetchType,n.jar),n.abortControllerType=r("abort-controller")}else n.fetchType=fetch.bind(self),n.abortControllerType=AbortController;return n}return Es(t,e),t.prototype.send=function(e){return t=this,n=void 0,o=function(){var t,n,r,o,i,s,a,c,u=this;return function(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}}(this,(function(l){switch(l.label){case 0:if(e.abortSignal&&e.abortSignal.aborted)throw new ss;if(!e.method)throw new Error("No method defined.");if(!e.url)throw new Error("No url defined.");t=new this.abortControllerType,e.abortSignal&&(e.abortSignal.onabort=function(){t.abort(),n=new ss}),r=null,e.timeout&&(o=e.timeout,r=setTimeout((function(){t.abort(),u.logger.log(ns.Warning,"Timeout from HTTP request."),n=new is}),o)),l.label=1;case 1:return l.trys.push([1,3,4,5]),[4,this.fetchType(e.url,{body:e.content,cache:"no-cache",credentials:!0===e.withCredentials?"include":"same-origin",headers:Ts({"Content-Type":"text/plain;charset=UTF-8","X-Requested-With":"XMLHttpRequest"},e.headers),method:e.method,mode:"cors",redirect:"manual",signal:t.signal})];case 2:return i=l.sent(),[3,5];case 3:if(s=l.sent(),n)throw n;throw this.logger.log(ns.Warning,"Error from HTTP request. "+s+"."),s;case 4:return r&&clearTimeout(r),e.abortSignal&&(e.abortSignal.onabort=null),[7];case 5:if(!i.ok)throw new os(i.statusText,i.status);return a=function(e,t){var n;switch(t){case"arraybuffer":n=e.arrayBuffer();break;case"text":default:n=e.text();break;case"blob":case"document":case"json":throw new Error(t+" is not supported.")}return n}(i,e.responseType),[4,a];case 6:return c=l.sent(),[2,new cs(i.status,i.statusText,c)]}}))},new((r=void 0)||(r=Promise))((function(e,i){function s(e){try{c(o.next(e))}catch(e){i(e)}}function a(e){try{c(o.throw(e))}catch(e){i(e)}}function c(t){t.done?e(t.value):new r((function(e){e(t.value)})).then(s,a)}c((o=o.apply(t,n||[])).next())}));var t,n,r,o},t.prototype.getCookieString=function(e){var t="";return ds.isNode&&this.jar&&this.jar.getCookies(e,(function(e,n){return t=n.join("; ")})),t},t}(us),Cs=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Rs=function(e){function t(t){var n=e.call(this)||this;return n.logger=t,n}return Cs(t,e),t.prototype.send=function(e){var t=this;return e.abortSignal&&e.abortSignal.aborted?Promise.reject(new ss):e.method?e.url?new Promise((function(n,r){var o=new XMLHttpRequest;o.open(e.method,e.url,!0),o.withCredentials=void 0===e.withCredentials||e.withCredentials,o.setRequestHeader("X-Requested-With","XMLHttpRequest"),o.setRequestHeader("Content-Type","text/plain;charset=UTF-8");var i=e.headers;i&&Object.keys(i).forEach((function(e){o.setRequestHeader(e,i[e])})),e.responseType&&(o.responseType=e.responseType),e.abortSignal&&(e.abortSignal.onabort=function(){o.abort(),r(new ss)}),e.timeout&&(o.timeout=e.timeout),o.onload=function(){e.abortSignal&&(e.abortSignal.onabort=null),o.status>=200&&o.status<300?n(new cs(o.status,o.statusText,o.response||o.responseText)):r(new os(o.statusText,o.status))},o.onerror=function(){t.logger.log(ns.Warning,"Error from HTTP request. "+o.status+": "+o.statusText+"."),r(new os(o.statusText,o.status))},o.ontimeout=function(){t.logger.log(ns.Warning,"Timeout from HTTP request."),r(new is)},o.send(e.content||"")})):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))},t}(us),As=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ns=function(e){function t(t){var n=e.call(this)||this;if("undefined"!=typeof fetch||ds.isNode)n.httpClient=new ks(t);else{if("undefined"==typeof XMLHttpRequest)throw new Error("No usable HttpClient found.");n.httpClient=new Rs(t)}return n}return As(t,e),t.prototype.send=function(e){return e.abortSignal&&e.abortSignal.aborted?Promise.reject(new ss):e.method?e.url?this.httpClient.send(e):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))},t.prototype.getCookieString=function(e){return this.httpClient.getCookieString(e)},t}(us),Ps=function(){function e(){}return e.write=function(t){return""+t+e.RecordSeparator},e.parse=function(t){if(t[t.length-1]!==e.RecordSeparator)throw new Error("Message is incomplete.");var n=t.split(e.RecordSeparator);return n.pop(),n},e.RecordSeparatorCode=30,e.RecordSeparator=String.fromCharCode(e.RecordSeparatorCode),e}(),Os=function(){function e(){}return e.prototype.writeHandshakeRequest=function(e){return Ps.write(JSON.stringify(e))},e.prototype.parseHandshakeResponse=function(e){var t,n;if(gs(e)||"undefined"!=typeof Buffer&&e instanceof Buffer){var r=new Uint8Array(e);if(-1===(i=r.indexOf(Ps.RecordSeparatorCode)))throw new Error("Message is incomplete.");var o=i+1;t=String.fromCharCode.apply(null,r.slice(0,o)),n=r.byteLength>o?r.slice(o).buffer:null}else{var i,s=e;if(-1===(i=s.indexOf(Ps.RecordSeparator)))throw new Error("Message is incomplete.");o=i+1,t=s.substring(0,o),n=s.length>o?s.substring(o):null}var a=Ps.parse(t),c=JSON.parse(a[0]);if(c.type)throw new Error("Expected a handshake response from the server.");return[n,c]},e}();!function(e){e[e.Invocation=1]="Invocation",e[e.StreamItem=2]="StreamItem",e[e.Completion=3]="Completion",e[e.StreamInvocation=4]="StreamInvocation",e[e.CancelInvocation=5]="CancelInvocation",e[e.Ping=6]="Ping",e[e.Close=7]="Close"}(_s||(_s={}));var Is,Ds=function(){function e(){this.observers=[]}return e.prototype.next=function(e){for(var t=0,n=this.observers;t<n.length;t++)n[t].next(e)},e.prototype.error=function(e){for(var t=0,n=this.observers;t<n.length;t++){var r=n[t];r.error&&r.error(e)}},e.prototype.complete=function(){for(var e=0,t=this.observers;e<t.length;e++){var n=t[e];n.complete&&n.complete()}},e.prototype.subscribe=function(e){return this.observers.push(e),new vs(this,e)},e}(),xs=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):new n((function(t){t(e.value)})).then(s,a)}c((r=r.apply(e,t||[])).next())}))},js=function(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};!function(e){e.Disconnected="Disconnected",e.Connecting="Connecting",e.Connected="Connected",e.Disconnecting="Disconnecting",e.Reconnecting="Reconnecting"}(Is||(Is={}));var Ms,Ls,Vs=function(){function e(e,t,n,r){var o=this;this.nextKeepAlive=0,fs.isRequired(e,"connection"),fs.isRequired(t,"logger"),fs.isRequired(n,"protocol"),this.serverTimeoutInMilliseconds=3e4,this.keepAliveIntervalInMilliseconds=15e3,this.logger=t,this.protocol=n,this.connection=e,this.reconnectPolicy=r,this.handshakeProtocol=new Os,this.connection.onreceive=function(e){return o.processIncomingData(e)},this.connection.onclose=function(e){return o.connectionClosed(e)},this.callbacks={},this.methods={},this.closedCallbacks=[],this.reconnectingCallbacks=[],this.reconnectedCallbacks=[],this.invocationId=0,this.receivedHandshakeResponse=!1,this.connectionState=Is.Disconnected,this.connectionStarted=!1,this.cachedPingMessage=this.protocol.writeMessage({type:_s.Ping})}return e.create=function(t,n,r,o){return new e(t,n,r,o)},Object.defineProperty(e.prototype,"state",{get:function(){return this.connectionState},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"connectionId",{get:function(){return this.connection&&this.connection.connectionId||null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"baseUrl",{get:function(){return this.connection.baseUrl||""},set:function(e){if(this.connectionState!==Is.Disconnected&&this.connectionState!==Is.Reconnecting)throw new Error("The HubConnection must be in the Disconnected or Reconnecting state to change the url.");if(!e)throw new Error("The HubConnection url must be a valid url.");this.connection.baseUrl=e},enumerable:!0,configurable:!0}),e.prototype.start=function(){return this.startPromise=this.startWithStateTransitions(),this.startPromise},e.prototype.startWithStateTransitions=function(){return xs(this,void 0,void 0,(function(){var e;return js(this,(function(t){switch(t.label){case 0:if(this.connectionState!==Is.Disconnected)return[2,Promise.reject(new Error("Cannot start a HubConnection that is not in the 'Disconnected' state."))];this.connectionState=Is.Connecting,this.logger.log(ns.Debug,"Starting HubConnection."),t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.startInternal()];case 2:return t.sent(),this.connectionState=Is.Connected,this.connectionStarted=!0,this.logger.log(ns.Debug,"HubConnection connected successfully."),[3,4];case 3:return e=t.sent(),this.connectionState=Is.Disconnected,this.logger.log(ns.Debug,"HubConnection failed to start successfully because of error '"+e+"'."),[2,Promise.reject(e)];case 4:return[2]}}))}))},e.prototype.startInternal=function(){return xs(this,void 0,void 0,(function(){var e,t,n,r=this;return js(this,(function(o){switch(o.label){case 0:return this.stopDuringStartError=void 0,this.receivedHandshakeResponse=!1,e=new Promise((function(e,t){r.handshakeResolver=e,r.handshakeRejecter=t})),[4,this.connection.start(this.protocol.transferFormat)];case 1:o.sent(),o.label=2;case 2:return o.trys.push([2,5,,7]),t={protocol:this.protocol.name,version:this.protocol.version},this.logger.log(ns.Debug,"Sending handshake request."),[4,this.sendMessage(this.handshakeProtocol.writeHandshakeRequest(t))];case 3:return o.sent(),this.logger.log(ns.Information,"Using HubProtocol '"+this.protocol.name+"'."),this.cleanupTimeout(),this.resetTimeoutPeriod(),this.resetKeepAliveInterval(),[4,e];case 4:if(o.sent(),this.stopDuringStartError)throw this.stopDuringStartError;return[3,7];case 5:return n=o.sent(),this.logger.log(ns.Debug,"Hub handshake failed with error '"+n+"' during start(). Stopping HubConnection."),this.cleanupTimeout(),this.cleanupPingTimer(),[4,this.connection.stop(n)];case 6:throw o.sent(),n;case 7:return[2]}}))}))},e.prototype.stop=function(){return xs(this,void 0,void 0,(function(){var e;return js(this,(function(t){switch(t.label){case 0:return e=this.startPromise,this.stopPromise=this.stopInternal(),[4,this.stopPromise];case 1:t.sent(),t.label=2;case 2:return t.trys.push([2,4,,5]),[4,e];case 3:case 4:return t.sent(),[3,5];case 5:return[2]}}))}))},e.prototype.stopInternal=function(e){return this.connectionState===Is.Disconnected?(this.logger.log(ns.Debug,"Call to HubConnection.stop("+e+") ignored because it is already in the disconnected state."),Promise.resolve()):this.connectionState===Is.Disconnecting?(this.logger.log(ns.Debug,"Call to HttpConnection.stop("+e+") ignored because the connection is already in the disconnecting state."),this.stopPromise):(this.connectionState=Is.Disconnecting,this.logger.log(ns.Debug,"Stopping HubConnection."),this.reconnectDelayHandle?(this.logger.log(ns.Debug,"Connection stopped during reconnect delay. Done reconnecting."),clearTimeout(this.reconnectDelayHandle),this.reconnectDelayHandle=void 0,this.completeClose(),Promise.resolve()):(this.cleanupTimeout(),this.cleanupPingTimer(),this.stopDuringStartError=e||new Error("The connection was stopped before the hub handshake could complete."),this.connection.stop(e)))},e.prototype.stream=function(e){for(var t=this,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var o,i=this.replaceStreamingParams(n),s=i[0],a=i[1],c=this.createStreamInvocation(e,n,a),u=new Ds;return u.cancelCallback=function(){var e=t.createCancelInvocation(c.invocationId);return delete t.callbacks[c.invocationId],o.then((function(){return t.sendWithProtocol(e)}))},this.callbacks[c.invocationId]=function(e,t){t?u.error(t):e&&(e.type===_s.Completion?e.error?u.error(new Error(e.error)):u.complete():u.next(e.item))},o=this.sendWithProtocol(c).catch((function(e){u.error(e),delete t.callbacks[c.invocationId]})),this.launchStreams(s,o),u},e.prototype.sendMessage=function(e){return this.resetKeepAliveInterval(),this.connection.send(e)},e.prototype.sendWithProtocol=function(e){return this.sendMessage(this.protocol.writeMessage(e))},e.prototype.send=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=this.replaceStreamingParams(t),o=r[0],i=r[1],s=this.sendWithProtocol(this.createInvocation(e,t,!0,i));return this.launchStreams(o,s),s},e.prototype.invoke=function(e){for(var t=this,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var o=this.replaceStreamingParams(n),i=o[0],s=o[1],a=this.createInvocation(e,n,!1,s),c=new Promise((function(e,n){t.callbacks[a.invocationId]=function(t,r){r?n(r):t&&(t.type===_s.Completion?t.error?n(new Error(t.error)):e(t.result):n(new Error("Unexpected message type: "+t.type)))};var r=t.sendWithProtocol(a).catch((function(e){n(e),delete t.callbacks[a.invocationId]}));t.launchStreams(i,r)}));return c},e.prototype.on=function(e,t){e&&t&&(e=e.toLowerCase(),this.methods[e]||(this.methods[e]=[]),-1===this.methods[e].indexOf(t)&&this.methods[e].push(t))},e.prototype.off=function(e,t){if(e){e=e.toLowerCase();var n=this.methods[e];if(n)if(t){var r=n.indexOf(t);-1!==r&&(n.splice(r,1),0===n.length&&delete this.methods[e])}else delete this.methods[e]}},e.prototype.onclose=function(e){e&&this.closedCallbacks.push(e)},e.prototype.onreconnecting=function(e){e&&this.reconnectingCallbacks.push(e)},e.prototype.onreconnected=function(e){e&&this.reconnectedCallbacks.push(e)},e.prototype.processIncomingData=function(e){if(this.cleanupTimeout(),this.receivedHandshakeResponse||(e=this.processHandshakeResponse(e),this.receivedHandshakeResponse=!0),e)for(var t=0,n=this.protocol.parseMessages(e,this.logger);t<n.length;t++){var r=n[t];switch(r.type){case _s.Invocation:this.invokeClientMethod(r);break;case _s.StreamItem:case _s.Completion:var o=this.callbacks[r.invocationId];o&&(r.type===_s.Completion&&delete this.callbacks[r.invocationId],o(r));break;case _s.Ping:break;case _s.Close:this.logger.log(ns.Information,"Close message received from server.");var i=r.error?new Error("Server returned an error on close: "+r.error):void 0;!0===r.allowReconnect?this.connection.stop(i):this.stopPromise=this.stopInternal(i);break;default:this.logger.log(ns.Warning,"Invalid message type: "+r.type+".")}}this.resetTimeoutPeriod()},e.prototype.processHandshakeResponse=function(e){var t,n,r;try{r=(t=this.handshakeProtocol.parseHandshakeResponse(e))[0],n=t[1]}catch(e){var o="Error parsing handshake response: "+e;this.logger.log(ns.Error,o);var i=new Error(o);throw this.handshakeRejecter(i),i}if(n.error)throw o="Server returned handshake error: "+n.error,this.logger.log(ns.Error,o),i=new Error(o),this.handshakeRejecter(i),i;return this.logger.log(ns.Debug,"Server handshake complete."),this.handshakeResolver(),r},e.prototype.resetKeepAliveInterval=function(){this.connection.features.inherentKeepAlive||(this.nextKeepAlive=(new Date).getTime()+this.keepAliveIntervalInMilliseconds,this.cleanupPingTimer())},e.prototype.resetTimeoutPeriod=function(){var e=this;if(!(this.connection.features&&this.connection.features.inherentKeepAlive||(this.timeoutHandle=setTimeout((function(){return e.serverTimeout()}),this.serverTimeoutInMilliseconds),void 0!==this.pingServerHandle))){var t=this.nextKeepAlive-(new Date).getTime();t<0&&(t=0),this.pingServerHandle=setTimeout((function(){return xs(e,void 0,void 0,(function(){return js(this,(function(e){switch(e.label){case 0:if(this.connectionState!==Is.Connected)return[3,4];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.sendMessage(this.cachedPingMessage)];case 2:return e.sent(),[3,4];case 3:return e.sent(),this.cleanupPingTimer(),[3,4];case 4:return[2]}}))}))}),t)}},e.prototype.serverTimeout=function(){this.connection.stop(new Error("Server timeout elapsed without receiving a message from the server."))},e.prototype.invokeClientMethod=function(e){var t=this,n=this.methods[e.target.toLowerCase()];if(n){try{n.forEach((function(n){return n.apply(t,e.arguments)}))}catch(t){this.logger.log(ns.Error,"A callback for the method "+e.target.toLowerCase()+" threw error '"+t+"'.")}if(e.invocationId){var r="Server requested a response, which is not supported in this version of the client.";this.logger.log(ns.Error,r),this.stopPromise=this.stopInternal(new Error(r))}}else this.logger.log(ns.Warning,"No client method with the name '"+e.target+"' found.")},e.prototype.connectionClosed=function(e){this.logger.log(ns.Debug,"HubConnection.connectionClosed("+e+") called while in state "+this.connectionState+"."),this.stopDuringStartError=this.stopDuringStartError||e||new Error("The underlying connection was closed before the hub handshake could complete."),this.handshakeResolver&&this.handshakeResolver(),this.cancelCallbacksWithError(e||new Error("Invocation canceled due to the underlying connection being closed.")),this.cleanupTimeout(),this.cleanupPingTimer(),this.connectionState===Is.Disconnecting?this.completeClose(e):this.connectionState===Is.Connected&&this.reconnectPolicy?this.reconnect(e):this.connectionState===Is.Connected&&this.completeClose(e)},e.prototype.completeClose=function(e){var t=this;if(this.connectionStarted){this.connectionState=Is.Disconnected,this.connectionStarted=!1;try{this.closedCallbacks.forEach((function(n){return n.apply(t,[e])}))}catch(t){this.logger.log(ns.Error,"An onclose callback called with error '"+e+"' threw error '"+t+"'.")}}},e.prototype.reconnect=function(e){return xs(this,void 0,void 0,(function(){var t,n,r,o,i,s=this;return js(this,(function(a){switch(a.label){case 0:if(t=Date.now(),n=0,r=void 0!==e?e:new Error("Attempting to reconnect due to a unknown error."),null===(o=this.getNextRetryDelay(n++,0,r)))return this.logger.log(ns.Debug,"Connection not reconnecting because the IRetryPolicy returned null on the first reconnect attempt."),this.completeClose(e),[2];if(this.connectionState=Is.Reconnecting,e?this.logger.log(ns.Information,"Connection reconnecting because of error '"+e+"'."):this.logger.log(ns.Information,"Connection reconnecting."),this.onreconnecting){try{this.reconnectingCallbacks.forEach((function(t){return t.apply(s,[e])}))}catch(t){this.logger.log(ns.Error,"An onreconnecting callback called with error '"+e+"' threw error '"+t+"'.")}if(this.connectionState!==Is.Reconnecting)return this.logger.log(ns.Debug,"Connection left the reconnecting state in onreconnecting callback. Done reconnecting."),[2]}a.label=1;case 1:return null===o?[3,7]:(this.logger.log(ns.Information,"Reconnect attempt number "+n+" will start in "+o+" ms."),[4,new Promise((function(e){s.reconnectDelayHandle=setTimeout(e,o)}))]);case 2:if(a.sent(),this.reconnectDelayHandle=void 0,this.connectionState!==Is.Reconnecting)return this.logger.log(ns.Debug,"Connection left the reconnecting state during reconnect delay. Done reconnecting."),[2];a.label=3;case 3:return a.trys.push([3,5,,6]),[4,this.startInternal()];case 4:if(a.sent(),this.connectionState=Is.Connected,this.logger.log(ns.Information,"HubConnection reconnected successfully."),this.onreconnected)try{this.reconnectedCallbacks.forEach((function(e){return e.apply(s,[s.connection.connectionId])}))}catch(e){this.logger.log(ns.Error,"An onreconnected callback called with connectionId '"+this.connection.connectionId+"; threw error '"+e+"'.")}return[2];case 5:return i=a.sent(),this.logger.log(ns.Information,"Reconnect attempt failed because of error '"+i+"'."),this.connectionState!==Is.Reconnecting?(this.logger.log(ns.Debug,"Connection moved to the '"+this.connectionState+"' from the reconnecting state during reconnect attempt. Done reconnecting."),this.connectionState===Is.Disconnecting&&this.completeClose(),[2]):(r=i instanceof Error?i:new Error(i.toString()),o=this.getNextRetryDelay(n++,Date.now()-t,r),[3,6]);case 6:return[3,1];case 7:return this.logger.log(ns.Information,"Reconnect retries have been exhausted after "+(Date.now()-t)+" ms and "+n+" failed attempts. Connection disconnecting."),this.completeClose(),[2]}}))}))},e.prototype.getNextRetryDelay=function(e,t,n){try{return this.reconnectPolicy.nextRetryDelayInMilliseconds({elapsedMilliseconds:t,previousRetryCount:e,retryReason:n})}catch(n){return this.logger.log(ns.Error,"IRetryPolicy.nextRetryDelayInMilliseconds("+e+", "+t+") threw error '"+n+"'."),null}},e.prototype.cancelCallbacksWithError=function(e){var t=this.callbacks;this.callbacks={},Object.keys(t).forEach((function(n){(0,t[n])(null,e)}))},e.prototype.cleanupPingTimer=function(){this.pingServerHandle&&(clearTimeout(this.pingServerHandle),this.pingServerHandle=void 0)},e.prototype.cleanupTimeout=function(){this.timeoutHandle&&clearTimeout(this.timeoutHandle)},e.prototype.createInvocation=function(e,t,n,r){if(n)return 0!==r.length?{arguments:t,streamIds:r,target:e,type:_s.Invocation}:{arguments:t,target:e,type:_s.Invocation};var o=this.invocationId;return this.invocationId++,0!==r.length?{arguments:t,invocationId:o.toString(),streamIds:r,target:e,type:_s.Invocation}:{arguments:t,invocationId:o.toString(),target:e,type:_s.Invocation}},e.prototype.launchStreams=function(e,t){var n=this;if(0!==e.length){t||(t=Promise.resolve());var r=function(r){e[r].subscribe({complete:function(){t=t.then((function(){return n.sendWithProtocol(n.createCompletionMessage(r))}))},error:function(e){var o;o=e instanceof Error?e.message:e&&e.toString?e.toString():"Unknown error",t=t.then((function(){return n.sendWithProtocol(n.createCompletionMessage(r,o))}))},next:function(e){t=t.then((function(){return n.sendWithProtocol(n.createStreamItemMessage(r,e))}))}})};for(var o in e)r(o)}},e.prototype.replaceStreamingParams=function(e){for(var t=[],n=[],r=0;r<e.length;r++){var o=e[r];if(this.isObservable(o)){var i=this.invocationId;this.invocationId++,t[i]=o,n.push(i.toString()),e.splice(r,1)}}return[t,n]},e.prototype.isObservable=function(e){return e&&e.subscribe&&"function"==typeof e.subscribe},e.prototype.createStreamInvocation=function(e,t,n){var r=this.invocationId;return this.invocationId++,0!==n.length?{arguments:t,invocationId:r.toString(),streamIds:n,target:e,type:_s.StreamInvocation}:{arguments:t,invocationId:r.toString(),target:e,type:_s.StreamInvocation}},e.prototype.createCancelInvocation=function(e){return{invocationId:e,type:_s.CancelInvocation}},e.prototype.createStreamItemMessage=function(e,t){return{invocationId:e,item:t,type:_s.StreamItem}},e.prototype.createCompletionMessage=function(e,t,n){return t?{error:t,invocationId:e,type:_s.Completion}:{invocationId:e,result:n,type:_s.Completion}},e}(),Bs=[0,2e3,1e4,3e4,null],Us=function(){function e(e){this.retryDelays=void 0!==e?e.concat([null]):Bs}return e.prototype.nextRetryDelayInMilliseconds=function(e){return this.retryDelays[e.previousRetryCount]},e}();!function(e){e[e.None=0]="None",e[e.WebSockets=1]="WebSockets",e[e.ServerSentEvents=2]="ServerSentEvents",e[e.LongPolling=4]="LongPolling"}(Ms||(Ms={})),function(e){e[e.Text=1]="Text",e[e.Binary=2]="Binary"}(Ls||(Ls={}));var Fs=function(){function e(){this.isAborted=!1,this.onabort=null}return e.prototype.abort=function(){this.isAborted||(this.isAborted=!0,this.onabort&&this.onabort())},Object.defineProperty(e.prototype,"signal",{get:function(){return this},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"aborted",{get:function(){return this.isAborted},enumerable:!0,configurable:!0}),e}(),Hs=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Ws=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):new n((function(t){t(e.value)})).then(s,a)}c((r=r.apply(e,t||[])).next())}))},zs=function(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},qs=function(){function e(e,t,n,r,o,i){this.httpClient=e,this.accessTokenFactory=t,this.logger=n,this.pollAbort=new Fs,this.logMessageContent=r,this.withCredentials=o,this.headers=i,this.running=!1,this.onreceive=null,this.onclose=null}return Object.defineProperty(e.prototype,"pollAborted",{get:function(){return this.pollAbort.aborted},enumerable:!0,configurable:!0}),e.prototype.connect=function(e,t){return Ws(this,void 0,void 0,(function(){var n,r,o,i,s,a,c,u,l;return zs(this,(function(h){switch(h.label){case 0:if(fs.isRequired(e,"url"),fs.isRequired(t,"transferFormat"),fs.isIn(t,Ls,"transferFormat"),this.url=e,this.logger.log(ns.Trace,"(LongPolling transport) Connecting."),t===Ls.Binary&&"undefined"!=typeof XMLHttpRequest&&"string"!=typeof(new XMLHttpRequest).responseType)throw new Error("Binary protocols over XmlHttpRequest not implementing advanced features are not supported.");return r=bs(),o=r[0],i=r[1],s=Hs(((n={})[o]=i,n),this.headers),a={abortSignal:this.pollAbort.signal,headers:s,timeout:1e5,withCredentials:this.withCredentials},t===Ls.Binary&&(a.responseType="arraybuffer"),[4,this.getAccessToken()];case 1:return c=h.sent(),this.updateHeaderToken(a,c),u=e+"&_="+Date.now(),this.logger.log(ns.Trace,"(LongPolling transport) polling: "+u+"."),[4,this.httpClient.get(u,a)];case 2:return 200!==(l=h.sent()).statusCode?(this.logger.log(ns.Error,"(LongPolling transport) Unexpected response code: "+l.statusCode+"."),this.closeError=new os(l.statusText||"",l.statusCode),this.running=!1):this.running=!0,this.receiving=this.poll(this.url,a),[2]}}))}))},e.prototype.getAccessToken=function(){return Ws(this,void 0,void 0,(function(){return zs(this,(function(e){switch(e.label){case 0:return this.accessTokenFactory?[4,this.accessTokenFactory()]:[3,2];case 1:return[2,e.sent()];case 2:return[2,null]}}))}))},e.prototype.updateHeaderToken=function(e,t){e.headers||(e.headers={}),t?e.headers.Authorization="Bearer "+t:e.headers.Authorization&&delete e.headers.Authorization},e.prototype.poll=function(e,t){return Ws(this,void 0,void 0,(function(){var n,r,o,i;return zs(this,(function(s){switch(s.label){case 0:s.trys.push([0,,8,9]),s.label=1;case 1:return this.running?[4,this.getAccessToken()]:[3,7];case 2:n=s.sent(),this.updateHeaderToken(t,n),s.label=3;case 3:return s.trys.push([3,5,,6]),r=e+"&_="+Date.now(),this.logger.log(ns.Trace,"(LongPolling transport) polling: "+r+"."),[4,this.httpClient.get(r,t)];case 4:return 204===(o=s.sent()).statusCode?(this.logger.log(ns.Information,"(LongPolling transport) Poll terminated by server."),this.running=!1):200!==o.statusCode?(this.logger.log(ns.Error,"(LongPolling transport) Unexpected response code: "+o.statusCode+"."),this.closeError=new os(o.statusText||"",o.statusCode),this.running=!1):o.content?(this.logger.log(ns.Trace,"(LongPolling transport) data received. "+ps(o.content,this.logMessageContent)+"."),this.onreceive&&this.onreceive(o.content)):this.logger.log(ns.Trace,"(LongPolling transport) Poll timed out, reissuing."),[3,6];case 5:return i=s.sent(),this.running?i instanceof is?this.logger.log(ns.Trace,"(LongPolling transport) Poll timed out, reissuing."):(this.closeError=i,this.running=!1):this.logger.log(ns.Trace,"(LongPolling transport) Poll errored after shutdown: "+i.message),[3,6];case 6:return[3,1];case 7:return[3,9];case 8:return this.logger.log(ns.Trace,"(LongPolling transport) Polling complete."),this.pollAborted||this.raiseOnClose(),[7];case 9:return[2]}}))}))},e.prototype.send=function(e){return Ws(this,void 0,void 0,(function(){return zs(this,(function(t){return this.running?[2,ys(this.logger,"LongPolling",this.httpClient,this.url,this.accessTokenFactory,e,this.logMessageContent,this.withCredentials,this.headers)]:[2,Promise.reject(new Error("Cannot send until the transport is connected"))]}))}))},e.prototype.stop=function(){return Ws(this,void 0,void 0,(function(){var e,t,n,r,o,i;return zs(this,(function(s){switch(s.label){case 0:this.logger.log(ns.Trace,"(LongPolling transport) Stopping polling."),this.running=!1,this.pollAbort.abort(),s.label=1;case 1:return s.trys.push([1,,5,6]),[4,this.receiving];case 2:return s.sent(),this.logger.log(ns.Trace,"(LongPolling transport) sending DELETE request to "+this.url+"."),e={},t=bs(),n=t[0],r=t[1],e[n]=r,o={headers:Hs({},e,this.headers),withCredentials:this.withCredentials},[4,this.getAccessToken()];case 3:return i=s.sent(),this.updateHeaderToken(o,i),[4,this.httpClient.delete(this.url,o)];case 4:return s.sent(),this.logger.log(ns.Trace,"(LongPolling transport) DELETE request sent."),[3,6];case 5:return this.logger.log(ns.Trace,"(LongPolling transport) Stop finished."),this.raiseOnClose(),[7];case 6:return[2]}}))}))},e.prototype.raiseOnClose=function(){if(this.onclose){var e="(LongPolling transport) Firing onclose event.";this.closeError&&(e+=" Error: "+this.closeError),this.logger.log(ns.Trace,e),this.onclose(this.closeError)}},e}(),Gs=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Ks=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):new n((function(t){t(e.value)})).then(s,a)}c((r=r.apply(e,t||[])).next())}))},$s=function(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},Zs=function(){function e(e,t,n,r,o,i,s){this.httpClient=e,this.accessTokenFactory=t,this.logger=n,this.logMessageContent=r,this.withCredentials=i,this.eventSourceConstructor=o,this.headers=s,this.onreceive=null,this.onclose=null}return e.prototype.connect=function(e,t){return Ks(this,void 0,void 0,(function(){var n,r=this;return $s(this,(function(o){switch(o.label){case 0:return fs.isRequired(e,"url"),fs.isRequired(t,"transferFormat"),fs.isIn(t,Ls,"transferFormat"),this.logger.log(ns.Trace,"(SSE transport) Connecting."),this.url=e,this.accessTokenFactory?[4,this.accessTokenFactory()]:[3,2];case 1:(n=o.sent())&&(e+=(e.indexOf("?")<0?"?":"&")+"access_token="+encodeURIComponent(n)),o.label=2;case 2:return[2,new Promise((function(n,o){var i=!1;if(t===Ls.Text){var s;if(ds.isBrowser||ds.isWebWorker)s=new r.eventSourceConstructor(e,{withCredentials:r.withCredentials});else{var a=r.httpClient.getCookieString(e),c={};c.Cookie=a;var u=bs(),l=u[0],h=u[1];c[l]=h,s=new r.eventSourceConstructor(e,{withCredentials:r.withCredentials,headers:Gs({},c,r.headers)})}try{s.onmessage=function(e){if(r.onreceive)try{r.logger.log(ns.Trace,"(SSE transport) data received. "+ps(e.data,r.logMessageContent)+"."),r.onreceive(e.data)}catch(e){return void r.close(e)}},s.onerror=function(e){var t=new Error(e.data||"Error occurred");i?r.close(t):o(t)},s.onopen=function(){r.logger.log(ns.Information,"SSE connected to "+r.url),r.eventSource=s,i=!0,n()}}catch(e){return void o(e)}}else o(new Error("The Server-Sent Events transport only supports the 'Text' transfer format"))}))]}}))}))},e.prototype.send=function(e){return Ks(this,void 0,void 0,(function(){return $s(this,(function(t){return this.eventSource?[2,ys(this.logger,"SSE",this.httpClient,this.url,this.accessTokenFactory,e,this.logMessageContent,this.withCredentials,this.headers)]:[2,Promise.reject(new Error("Cannot send until the transport is connected"))]}))}))},e.prototype.stop=function(){return this.close(),Promise.resolve()},e.prototype.close=function(e){this.eventSource&&(this.eventSource.close(),this.eventSource=void 0,this.onclose&&this.onclose(e))},e}(),Js=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Xs=function(){function e(e,t,n,r,o,i){this.logger=n,this.accessTokenFactory=t,this.logMessageContent=r,this.webSocketConstructor=o,this.httpClient=e,this.onreceive=null,this.onclose=null,this.headers=i}return e.prototype.connect=function(e,t){return n=this,r=void 0,i=function(){var n,r=this;return function(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}}(this,(function(o){switch(o.label){case 0:return fs.isRequired(e,"url"),fs.isRequired(t,"transferFormat"),fs.isIn(t,Ls,"transferFormat"),this.logger.log(ns.Trace,"(WebSockets transport) Connecting."),this.accessTokenFactory?[4,this.accessTokenFactory()]:[3,2];case 1:(n=o.sent())&&(e+=(e.indexOf("?")<0?"?":"&")+"access_token="+encodeURIComponent(n)),o.label=2;case 2:return[2,new Promise((function(n,o){var i;e=e.replace(/^http/,"ws");var s=r.httpClient.getCookieString(e),a=!1;if(ds.isNode){var c={},u=bs(),l=u[0],h=u[1];c[l]=h,s&&(c.Cookie=""+s),i=new r.webSocketConstructor(e,void 0,{headers:Js({},c,r.headers)})}i||(i=new r.webSocketConstructor(e)),t===Ls.Binary&&(i.binaryType="arraybuffer"),i.onopen=function(t){r.logger.log(ns.Information,"WebSocket connected to "+e+"."),r.webSocket=i,a=!0,n()},i.onerror=function(e){var t;t="undefined"!=typeof ErrorEvent&&e instanceof ErrorEvent?e.error:new Error("There was an error with the transport."),o(t)},i.onmessage=function(e){if(r.logger.log(ns.Trace,"(WebSockets transport) data received. "+ps(e.data,r.logMessageContent)+"."),r.onreceive)try{r.onreceive(e.data)}catch(e){return void r.close(e)}},i.onclose=function(e){var t;a?r.close(e):(t="undefined"!=typeof ErrorEvent&&e instanceof ErrorEvent?e.error:new Error("There was an error with the transport."),o(t))}}))]}}))},new((o=void 0)||(o=Promise))((function(e,t){function s(e){try{c(i.next(e))}catch(e){t(e)}}function a(e){try{c(i.throw(e))}catch(e){t(e)}}function c(t){t.done?e(t.value):new o((function(e){e(t.value)})).then(s,a)}c((i=i.apply(n,r||[])).next())}));var n,r,o,i},e.prototype.send=function(e){return this.webSocket&&this.webSocket.readyState===this.webSocketConstructor.OPEN?(this.logger.log(ns.Trace,"(WebSockets transport) sending data. "+ps(e,this.logMessageContent)+"."),this.webSocket.send(e),Promise.resolve()):Promise.reject("WebSocket is not in the OPEN state")},e.prototype.stop=function(){return this.webSocket&&this.close(void 0),Promise.resolve()},e.prototype.close=function(e){this.webSocket&&(this.webSocket.onclose=function(){},this.webSocket.onmessage=function(){},this.webSocket.onerror=function(){},this.webSocket.close(),this.webSocket=void 0),this.logger.log(ns.Trace,"(WebSockets transport) socket closed."),this.onclose&&(!this.isCloseEvent(e)||!1!==e.wasClean&&1e3===e.code?e instanceof Error?this.onclose(e):this.onclose():this.onclose(new Error("WebSocket closed with status code: "+e.code+" ("+e.reason+").")))},e.prototype.isCloseEvent=function(e){return e&&"boolean"==typeof e.wasClean&&"number"==typeof e.code},e}(),Qs=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Ys=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):new n((function(t){t(e.value)})).then(s,a)}c((r=r.apply(e,t||[])).next())}))},ea=function(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},ta=function(){function e(e,t){var n;if(void 0===t&&(t={}),this.stopPromiseResolver=function(){},this.features={},this.negotiateVersion=1,fs.isRequired(e,"url"),this.logger=void 0===(n=t.logger)?new ms(ns.Information):null===n?ls.instance:n.log?n:new ms(n),this.baseUrl=this.resolveUrl(e),(t=t||{}).logMessageContent=void 0!==t.logMessageContent&&t.logMessageContent,"boolean"!=typeof t.withCredentials&&void 0!==t.withCredentials)throw new Error("withCredentials option was not a 'boolean' or 'undefined' value");t.withCredentials=void 0===t.withCredentials||t.withCredentials;var r=null,o=null;if(ds.isNode){var i=require;r=i("ws"),o=i("eventsource")}ds.isNode||"undefined"==typeof WebSocket||t.WebSocket?ds.isNode&&!t.WebSocket&&r&&(t.WebSocket=r):t.WebSocket=WebSocket,ds.isNode||"undefined"==typeof EventSource||t.EventSource?ds.isNode&&!t.EventSource&&void 0!==o&&(t.EventSource=o):t.EventSource=EventSource,this.httpClient=t.httpClient||new Ns(this.logger),this.connectionState="Disconnected",this.connectionStarted=!1,this.options=t,this.onreceive=null,this.onclose=null}return e.prototype.start=function(e){return Ys(this,void 0,void 0,(function(){var t;return ea(this,(function(n){switch(n.label){case 0:return e=e||Ls.Binary,fs.isIn(e,Ls,"transferFormat"),this.logger.log(ns.Debug,"Starting connection with transfer format '"+Ls[e]+"'."),"Disconnected"!==this.connectionState?[2,Promise.reject(new Error("Cannot start an HttpConnection that is not in the 'Disconnected' state."))]:(this.connectionState="Connecting",this.startInternalPromise=this.startInternal(e),[4,this.startInternalPromise]);case 1:return n.sent(),"Disconnecting"!==this.connectionState?[3,3]:(t="Failed to start the HttpConnection before stop() was called.",this.logger.log(ns.Error,t),[4,this.stopPromise]);case 2:return n.sent(),[2,Promise.reject(new Error(t))];case 3:if("Connected"!==this.connectionState)return t="HttpConnection.startInternal completed gracefully but didn't enter the connection into the connected state!",this.logger.log(ns.Error,t),[2,Promise.reject(new Error(t))];n.label=4;case 4:return this.connectionStarted=!0,[2]}}))}))},e.prototype.send=function(e){return"Connected"!==this.connectionState?Promise.reject(new Error("Cannot send data if the connection is not in the 'Connected' State.")):(this.sendQueue||(this.sendQueue=new na(this.transport)),this.sendQueue.send(e))},e.prototype.stop=function(e){return Ys(this,void 0,void 0,(function(){var t=this;return ea(this,(function(n){switch(n.label){case 0:return"Disconnected"===this.connectionState?(this.logger.log(ns.Debug,"Call to HttpConnection.stop("+e+") ignored because the connection is already in the disconnected state."),[2,Promise.resolve()]):"Disconnecting"===this.connectionState?(this.logger.log(ns.Debug,"Call to HttpConnection.stop("+e+") ignored because the connection is already in the disconnecting state."),[2,this.stopPromise]):(this.connectionState="Disconnecting",this.stopPromise=new Promise((function(e){t.stopPromiseResolver=e})),[4,this.stopInternal(e)]);case 1:return n.sent(),[4,this.stopPromise];case 2:return n.sent(),[2]}}))}))},e.prototype.stopInternal=function(e){return Ys(this,void 0,void 0,(function(){var t;return ea(this,(function(n){switch(n.label){case 0:this.stopError=e,n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.startInternalPromise];case 2:case 3:return n.sent(),[3,4];case 4:if(!this.transport)return[3,9];n.label=5;case 5:return n.trys.push([5,7,,8]),[4,this.transport.stop()];case 6:return n.sent(),[3,8];case 7:return t=n.sent(),this.logger.log(ns.Error,"HttpConnection.transport.stop() threw error '"+t+"'."),this.stopConnection(),[3,8];case 8:return this.transport=void 0,[3,10];case 9:this.logger.log(ns.Debug,"HttpConnection.transport is undefined in HttpConnection.stop() because start() failed."),n.label=10;case 10:return[2]}}))}))},e.prototype.startInternal=function(e){return Ys(this,void 0,void 0,(function(){var t,n,r,o,i,s;return ea(this,(function(a){switch(a.label){case 0:t=this.baseUrl,this.accessTokenFactory=this.options.accessTokenFactory,a.label=1;case 1:return a.trys.push([1,12,,13]),this.options.skipNegotiation?this.options.transport!==Ms.WebSockets?[3,3]:(this.transport=this.constructTransport(Ms.WebSockets),[4,this.startTransport(t,e)]):[3,5];case 2:return a.sent(),[3,4];case 3:throw new Error("Negotiation can only be skipped when using the WebSocket transport directly.");case 4:return[3,11];case 5:n=null,r=0,o=function(){var e;return ea(this,(function(o){switch(o.label){case 0:return[4,i.getNegotiationResponse(t)];case 1:if(n=o.sent(),"Disconnecting"===i.connectionState||"Disconnected"===i.connectionState)throw new Error("The connection was stopped during negotiation.");if(n.error)throw new Error(n.error);if(n.ProtocolVersion)throw new Error("Detected a connection attempt to an ASP.NET SignalR Server. This client only supports connecting to an ASP.NET Core SignalR Server. See https://aka.ms/signalr-core-differences for details.");return n.url&&(t=n.url),n.accessToken&&(e=n.accessToken,i.accessTokenFactory=function(){return e}),r++,[2]}}))},i=this,a.label=6;case 6:return[5,o()];case 7:a.sent(),a.label=8;case 8:if(n.url&&r<100)return[3,6];a.label=9;case 9:if(100===r&&n.url)throw new Error("Negotiate redirection limit exceeded.");return[4,this.createTransport(t,this.options.transport,n,e)];case 10:a.sent(),a.label=11;case 11:return this.transport instanceof qs&&(this.features.inherentKeepAlive=!0),"Connecting"===this.connectionState&&(this.logger.log(ns.Debug,"The HttpConnection connected successfully."),this.connectionState="Connected"),[3,13];case 12:return s=a.sent(),this.logger.log(ns.Error,"Failed to start the connection: "+s),this.connectionState="Disconnected",this.transport=void 0,this.stopPromiseResolver(),[2,Promise.reject(s)];case 13:return[2]}}))}))},e.prototype.getNegotiationResponse=function(e){return Ys(this,void 0,void 0,(function(){var t,n,r,o,i,s,a,c,u;return ea(this,(function(l){switch(l.label){case 0:return t={},this.accessTokenFactory?[4,this.accessTokenFactory()]:[3,2];case 1:(n=l.sent())&&(t.Authorization="Bearer "+n),l.label=2;case 2:r=bs(),o=r[0],i=r[1],t[o]=i,s=this.resolveNegotiateUrl(e),this.logger.log(ns.Debug,"Sending negotiation request: "+s+"."),l.label=3;case 3:return l.trys.push([3,5,,6]),[4,this.httpClient.post(s,{content:"",headers:Qs({},t,this.options.headers),withCredentials:this.options.withCredentials})];case 4:return 200!==(a=l.sent()).statusCode?[2,Promise.reject(new Error("Unexpected status code returned from negotiate '"+a.statusCode+"'"))]:((!(c=JSON.parse(a.content)).negotiateVersion||c.negotiateVersion<1)&&(c.connectionToken=c.connectionId),[2,c]);case 5:return u=l.sent(),this.logger.log(ns.Error,"Failed to complete negotiation with the server: "+u),[2,Promise.reject(u)];case 6:return[2]}}))}))},e.prototype.createConnectUrl=function(e,t){return t?e+(-1===e.indexOf("?")?"?":"&")+"id="+t:e},e.prototype.createTransport=function(e,t,n,r){return Ys(this,void 0,void 0,(function(){var o,i,s,a,c,u,l,h,f,d,p;return ea(this,(function(g){switch(g.label){case 0:return o=this.createConnectUrl(e,n.connectionToken),this.isITransport(t)?(this.logger.log(ns.Debug,"Connection was provided an instance of ITransport, using that directly."),this.transport=t,[4,this.startTransport(o,r)]):[3,2];case 1:return g.sent(),this.connectionId=n.connectionId,[2];case 2:i=[],s=n.availableTransports||[],a=n,c=0,u=s,g.label=3;case 3:return c<u.length?(l=u[c],(h=this.resolveTransportOrError(l,t,r))instanceof Error?(i.push(l.transport+" failed: "+h),[3,12]):[3,4]):[3,13];case 4:if(!this.isITransport(h))return[3,12];if(this.transport=h,a)return[3,9];g.label=5;case 5:return g.trys.push([5,7,,8]),[4,this.getNegotiationResponse(e)];case 6:return a=g.sent(),[3,8];case 7:return f=g.sent(),[2,Promise.reject(f)];case 8:o=this.createConnectUrl(e,a.connectionToken),g.label=9;case 9:return g.trys.push([9,11,,12]),[4,this.startTransport(o,r)];case 10:return g.sent(),this.connectionId=a.connectionId,[2];case 11:return d=g.sent(),this.logger.log(ns.Error,"Failed to start the transport '"+l.transport+"': "+d),a=void 0,i.push(l.transport+" failed: "+d),"Connecting"!==this.connectionState?(p="Failed to select transport before stop() was called.",this.logger.log(ns.Debug,p),[2,Promise.reject(new Error(p))]):[3,12];case 12:return c++,[3,3];case 13:return i.length>0?[2,Promise.reject(new Error("Unable to connect to the server with any of the available transports. "+i.join(" ")))]:[2,Promise.reject(new Error("None of the transports supported by the client are supported by the server."))]}}))}))},e.prototype.constructTransport=function(e){switch(e){case Ms.WebSockets:if(!this.options.WebSocket)throw new Error("'WebSocket' is not supported in your environment.");return new Xs(this.httpClient,this.accessTokenFactory,this.logger,this.options.logMessageContent||!1,this.options.WebSocket,this.options.headers||{});case Ms.ServerSentEvents:if(!this.options.EventSource)throw new Error("'EventSource' is not supported in your environment.");return new Zs(this.httpClient,this.accessTokenFactory,this.logger,this.options.logMessageContent||!1,this.options.EventSource,this.options.withCredentials,this.options.headers||{});case Ms.LongPolling:return new qs(this.httpClient,this.accessTokenFactory,this.logger,this.options.logMessageContent||!1,this.options.withCredentials,this.options.headers||{});default:throw new Error("Unknown transport: "+e+".")}},e.prototype.startTransport=function(e,t){var n=this;return this.transport.onreceive=this.onreceive,this.transport.onclose=function(e){return n.stopConnection(e)},this.transport.connect(e,t)},e.prototype.resolveTransportOrError=function(e,t,n){var r=Ms[e.transport];if(null==r)return this.logger.log(ns.Debug,"Skipping transport '"+e.transport+"' because it is not supported by this client."),new Error("Skipping transport '"+e.transport+"' because it is not supported by this client.");if(!function(e,t){return!e||0!=(t&e)}(t,r))return this.logger.log(ns.Debug,"Skipping transport '"+Ms[r]+"' because it was disabled by the client."),new Error("'"+Ms[r]+"' is disabled by the client.");var o=e.transferFormats.map((function(e){return Ls[e]}));if(!(o.indexOf(n)>=0))return this.logger.log(ns.Debug,"Skipping transport '"+Ms[r]+"' because it does not support the requested transfer format '"+Ls[n]+"'."),new Error("'"+Ms[r]+"' does not support "+Ls[n]+".");if(r===Ms.WebSockets&&!this.options.WebSocket||r===Ms.ServerSentEvents&&!this.options.EventSource)return this.logger.log(ns.Debug,"Skipping transport '"+Ms[r]+"' because it is not supported in your environment.'"),new Error("'"+Ms[r]+"' is not supported in your environment.");this.logger.log(ns.Debug,"Selecting transport '"+Ms[r]+"'.");try{return this.constructTransport(r)}catch(e){return e}},e.prototype.isITransport=function(e){return e&&"object"==typeof e&&"connect"in e},e.prototype.stopConnection=function(e){var t=this;if(this.logger.log(ns.Debug,"HttpConnection.stopConnection("+e+") called while in state "+this.connectionState+"."),this.transport=void 0,e=this.stopError||e,this.stopError=void 0,"Disconnected"!==this.connectionState){if("Connecting"===this.connectionState)throw this.logger.log(ns.Warning,"Call to HttpConnection.stopConnection("+e+") was ignored because the connection is still in the connecting state."),new Error("HttpConnection.stopConnection("+e+") was called while the connection is still in the connecting state.");if("Disconnecting"===this.connectionState&&this.stopPromiseResolver(),e?this.logger.log(ns.Error,"Connection disconnected with error '"+e+"'."):this.logger.log(ns.Information,"Connection disconnected."),this.sendQueue&&(this.sendQueue.stop().catch((function(e){t.logger.log(ns.Error,"TransportSendQueue.stop() threw error '"+e+"'.")})),this.sendQueue=void 0),this.connectionId=void 0,this.connectionState="Disconnected",this.connectionStarted){this.connectionStarted=!1;try{this.onclose&&this.onclose(e)}catch(t){this.logger.log(ns.Error,"HttpConnection.onclose("+e+") threw error '"+t+"'.")}}}else this.logger.log(ns.Debug,"Call to HttpConnection.stopConnection("+e+") was ignored because the connection is already in the disconnected state.")},e.prototype.resolveUrl=function(e){if(0===e.lastIndexOf("https://",0)||0===e.lastIndexOf("http://",0))return e;if(!ds.isBrowser||!window.document)throw new Error("Cannot resolve '"+e+"'.");var t=window.document.createElement("a");return t.href=e,this.logger.log(ns.Information,"Normalizing '"+e+"' to '"+t.href+"'."),t.href},e.prototype.resolveNegotiateUrl=function(e){var t=e.indexOf("?"),n=e.substring(0,-1===t?e.length:t);return"/"!==n[n.length-1]&&(n+="/"),n+="negotiate",-1===(n+=-1===t?"":e.substring(t)).indexOf("negotiateVersion")&&(n+=-1===t?"?":"&",n+="negotiateVersion="+this.negotiateVersion),n},e}(),na=function(){function e(e){this.transport=e,this.buffer=[],this.executing=!0,this.sendBufferedData=new ra,this.transportResult=new ra,this.sendLoopPromise=this.sendLoop()}return e.prototype.send=function(e){return this.bufferData(e),this.transportResult||(this.transportResult=new ra),this.transportResult.promise},e.prototype.stop=function(){return this.executing=!1,this.sendBufferedData.resolve(),this.sendLoopPromise},e.prototype.bufferData=function(e){if(this.buffer.length&&typeof this.buffer[0]!=typeof e)throw new Error("Expected data to be of type "+typeof this.buffer+" but was of type "+typeof e);this.buffer.push(e),this.sendBufferedData.resolve()},e.prototype.sendLoop=function(){return Ys(this,void 0,void 0,(function(){var t,n,r;return ea(this,(function(o){switch(o.label){case 0:return[4,this.sendBufferedData.promise];case 1:if(o.sent(),!this.executing)return this.transportResult&&this.transportResult.reject("Connection stopped."),[3,6];this.sendBufferedData=new ra,t=this.transportResult,this.transportResult=void 0,n="string"==typeof this.buffer[0]?this.buffer.join(""):e.concatBuffers(this.buffer),this.buffer.length=0,o.label=2;case 2:return o.trys.push([2,4,,5]),[4,this.transport.send(n)];case 3:return o.sent(),t.resolve(),[3,5];case 4:return r=o.sent(),t.reject(r),[3,5];case 5:return[3,0];case 6:return[2]}}))}))},e.concatBuffers=function(e){for(var t=e.map((function(e){return e.byteLength})).reduce((function(e,t){return e+t})),n=new Uint8Array(t),r=0,o=0,i=e;o<i.length;o++){var s=i[o];n.set(new Uint8Array(s),r),r+=s.byteLength}return n.buffer},e}(),ra=function(){function e(){var e=this;this.promise=new Promise((function(t,n){var r;return r=[t,n],e.resolver=r[0],e.rejecter=r[1],r}))}return e.prototype.resolve=function(){this.resolver()},e.prototype.reject=function(e){this.rejecter(e)},e}(),oa=function(){function e(){this.name="json",this.version=1,this.transferFormat=Ls.Text}return e.prototype.parseMessages=function(e,t){if("string"!=typeof e)throw new Error("Invalid input for JSON hub protocol. Expected a string.");if(!e)return[];null===t&&(t=ls.instance);for(var n=[],r=0,o=Ps.parse(e);r<o.length;r++){var i=o[r],s=JSON.parse(i);if("number"!=typeof s.type)throw new Error("Invalid payload.");switch(s.type){case _s.Invocation:this.isInvocationMessage(s);break;case _s.StreamItem:this.isStreamItemMessage(s);break;case _s.Completion:this.isCompletionMessage(s);break;case _s.Ping:case _s.Close:break;default:t.log(ns.Information,"Unknown message type '"+s.type+"' ignored.");continue}n.push(s)}return n},e.prototype.writeMessage=function(e){return Ps.write(JSON.stringify(e))},e.prototype.isInvocationMessage=function(e){this.assertNotEmptyString(e.target,"Invalid payload for Invocation message."),void 0!==e.invocationId&&this.assertNotEmptyString(e.invocationId,"Invalid payload for Invocation message.")},e.prototype.isStreamItemMessage=function(e){if(this.assertNotEmptyString(e.invocationId,"Invalid payload for StreamItem message."),void 0===e.item)throw new Error("Invalid payload for StreamItem message.")},e.prototype.isCompletionMessage=function(e){if(e.result&&e.error)throw new Error("Invalid payload for Completion message.");!e.result&&e.error&&this.assertNotEmptyString(e.error,"Invalid payload for Completion message."),this.assertNotEmptyString(e.invocationId,"Invalid payload for Completion message.")},e.prototype.assertNotEmptyString=function(e,t){if("string"!=typeof e||""===e)throw new Error(t)},e}(),ia=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},sa={trace:ns.Trace,debug:ns.Debug,info:ns.Information,information:ns.Information,warn:ns.Warning,warning:ns.Warning,error:ns.Error,critical:ns.Critical,none:ns.None},aa=function(){function e(){}return e.prototype.configureLogging=function(e){if(fs.isRequired(e,"logging"),void 0!==e.log)this.logger=e;else if("string"==typeof e){var t=function(e){var t=sa[e.toLowerCase()];if(void 0!==t)return t;throw new Error("Unknown log level: "+e)}(e);this.logger=new ms(t)}else this.logger=new ms(e);return this},e.prototype.withUrl=function(e,t){return fs.isRequired(e,"url"),fs.isNotEmpty(e,"url"),this.url=e,this.httpConnectionOptions=ia({},this.httpConnectionOptions,"object"==typeof t?t:{transport:t}),this},e.prototype.withHubProtocol=function(e){return fs.isRequired(e,"protocol"),this.protocol=e,this},e.prototype.withAutomaticReconnect=function(e){if(this.reconnectPolicy)throw new Error("A reconnectPolicy has already been set.");return e?Array.isArray(e)?this.reconnectPolicy=new Us(e):this.reconnectPolicy=e:this.reconnectPolicy=new Us,this},e.prototype.build=function(){var e=this.httpConnectionOptions||{};if(void 0===e.logger&&(e.logger=this.logger),!this.url)throw new Error("The 'HubConnectionBuilder.withUrl' method must be called before building the connection.");var t=new ta(this.url,e);return Vs.create(t,this.logger||ls.instance,this.protocol||new oa,this.reconnectPolicy)},e}(),ca=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.connection=(new aa).withUrl(t).configureLogging(ns.Information).build(),this.connection.on("DevicePropertyChangedEvent",n)}var t,n;return t=e,(n=[{key:"start",value:function(){return this.connection.start()}},{key:"stop",value:function(){return this.connection.stop()}}])&&es(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),ua=function(t){var n=t.url,r=t.children,o=Di(qi),i=Li((0,e.useState)(),2),s=i[0],a=i[1],c=xi(Ki),u=Li((0,e.useState)(null),2),l=u[0],h=u[1];(0,e.useEffect)((function(){var e=new ca(n,f);return h(e),function(){e.stop()}}),[]);var f=function(e){c(e[0].Payload)};return o?r({onStreamStart:function(){return a(""),l.start().catch((function(e){return a(e.message),Promise.reject()}))},onStreamStop:function(){return l.stop()},error:s,devicesConfiguration:o}):null};function la(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var ha=function(e){return(0,$i.jsxs)("div",{children:[(0,$i.jsxs)("div",{children:["Sorry. Couldn't get configuration data ",e.error]}),(0,$i.jsx)("button",{onClick:e.resetErrorBoundary,children:"OK"})]})},fa=function(e){if("object"!==o(e))throw new Error("single-spa-react requires a configuration object");var t=r(r({},h),e);if(!t.React)throw new Error("single-spa-react must be passed opts.React");if(!t.ReactDOM)throw new Error("single-spa-react must be passed opts.ReactDOM");if(!t.rootComponent&&!t.loadRootComponent)throw new Error("single-spa-react must be passed opts.rootComponent or opts.loadRootComponent");if(t.errorBoundary&&"function"!=typeof t.errorBoundary)throw Error("The errorBoundary opt for single-spa-react must either be omitted or be a function that returns React elements");!l&&t.React.createContext&&(l=t.React.createContext());var n={bootstrap:f.bind(null,t),mount:d.bind(null,t),unmount:p.bind(null,t)};return t.parcelCanUpdate&&(n.update=g.bind(null,t)),n}({React:e.default,ReactDOM:t.default,rootComponent:function(t){return(0,$i.jsx)(Ai,{children:(0,$i.jsx)(m.ErrorBoundary,{FallbackComponent:ha,children:(0,$i.jsx)(e.Suspense,{fallback:(0,$i.jsx)("div",{children:"Trying to get devices configuration ..."}),children:(0,$i.jsx)(ua,{url:"http://localhost:8181/websocketHub",children:function(e){return(0,$i.jsx)(Xi,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?la(Object(n),!0).forEach((function(t){v(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):la(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e))}})})})})},errorBoundary:function(e,t,n){return null}}),da=fa.bootstrap,pa=fa.mount,ga=fa.unmount})(),s})())}}}));
//# sourceMappingURL=spa-dashboard.js.map